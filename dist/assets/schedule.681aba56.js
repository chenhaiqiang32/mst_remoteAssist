import{ab as se,ad as te,v as ne,aq as le,_ as oe}from"./index.5beda46c.js";/* empty css               */import{d as ie,c as T,j as v,a as de,aS as _,w as ue,o as re,b as ce,C as c,D as m,E as t,u as A,aN as d,aI as o,aH as r,aK as E,aJ as H,aE as me,aF as j,aM as O,aW as p,b5 as ge,bc as pe,bO as he,b9 as ve,b8 as _e,aV as fe,ba as be,bb as ye,bd as De,aX as Te}from"./arco.638965b6.js";import{c as Ae}from"./icon_close.f7fee805.js";import{p as N,g as U}from"./icon_volume_1.148c46df.js";const Se="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAAXNSR0IArs4c6QAAARFJREFUKFOVks9KQlEQxn/jHxD0+gq1bFnQA7i8KV58gEDFRYsWCfYYLdq0aCkEig9gd+m+QJcu6xW8i4SrTszRY0QhNYvD4fD9hm/ON8KutFIpUC5fA5eongA5RGbAE4vFo0wmS5OKHRqGx+Tzz4iY8GepzknTC4njN3Gdg2DqxEEASfId8G8GJcmZaBTdAPdO3O/DaATD4RbqdKBWg2bTN7o14AU43wuiCAYDKBbB330DmInW6ykiub0P62pCKwO/xKC6NOADkcIfgZVZmgKnDmi3odE4ZOnVgB5w9+vQrdbWnh96s+n+/1tdcNXqEdlsfDC49TqU8fjdJe0gC7BUuiKTsdWwmVaIzHer8eBX4xNikoAj5wBd+QAAAABJRU5ErkJggg==",Ie={class:"schedule-options-container modal-container"},ke=["src"],Ve={class:"modal-title"},Ce={class:"modal-main wsl-scroll"},we={class:"users-main"},Ye={class:"users-main-header"},$e={class:"user-main-header-left"},Me={class:"user-main-header-right-icon"},Be={class:"user-main-header-right-label"},Ee={class:"users-main-body"},He={key:0,class:"users-main-body-main"},je={class:"users-main-body-main-item-top"},Oe=["src"],Ne={class:"users-main-body-main-item-bot textEllipsis"},Ue=["onClick"],Fe=["src"],Ke={key:1,class:"users-main-body-no-data"},Pe={class:"bx"},xe={key:0,class:"ax"},Re={class:"label"},ze=["src"],qe={key:1,class:"ax"},Qe={class:"label"},We={class:"des"},Ge={class:"modal-bot"},Je=ie({__name:"schedule",props:{meetingDetail:{}},emits:["handleClose","handleInviteOpen"],setup(F,{emit:K}){const u=se();te();const{t:h,locale:S}=ne.exports.useI18n(),I=T(()=>{var e;return(e=u.industryList)==null?void 0:e.map(a=>({label:S.value==="zh-CN"?a.value:a.english,value:a.label}))}),k=T(()=>{var e;return(e=u.languageList)==null?void 0:e.map(a=>({...a,label:S.value==="zh-CN"?a.value:a.english,value:a.label,ctry:a.flagUrl}))}),V=K,i=F,s=v({subject:"",userIds:[],startTime:"",endTime:"",recordStatus:"0",aiStatus:"0",escaping:"0",voiceTranslation:!1,languageType:"cn",industryType:"default"});de(()=>{var a;((a=k.value)==null?void 0:a.some(l=>l.type==="aliyun"))&&(s.value.languageType="zh")});const P=T(()=>{const e=_(),a=e.add(30,"minute");return{defaultValue:a.isAfter(e.endOf("day"))?["00:00:00","01:00:00"]:[`${e.format("HH:mm")}:00`,`${a.format("HH:mm:")}:00`],hideDisabledOptions:!0}}),x=e=>e&&_(e).isBefore(_(),"day"),R=e=>{const a=_();return _(e).isSame(a,"day")?{disabledHours:()=>Array.from({length:a.hour()},(l,g)=>g),disabledMinutes:l=>l===a.hour()?Array.from({length:a.minute()},(g,D)=>D):[],disabledSeconds:()=>[]}:{disabledHours:()=>[],disabledMinutes:()=>[],disabledSeconds:()=>[]}},f=v([]),b=v(s.value.recordStatus==="1"),C=v(s.value.aiStatus==="1"),z=v(s.value.escaping==="1"),q=e=>{e&&(s.value.startTime=`${e[0]}:00`,s.value.endTime=`${e[1]}:00`)},w=()=>{if(!i.meetingDetail)s.value.userIds=N(u.schedulePsn,"userId");else{u.updateSchedulePsn(i.meetingDetail.invitees);const e=U(i.meetingDetail.startTime,"YYYY-MM-DD HH:mm"),a=U(i.meetingDetail.endTime,"YYYY-MM-DD HH:mm");f.value=[e,a],console.log("handleInitFormData---",i.meetingDetail,f),s.value={planId:i.meetingDetail.planId,subject:i.meetingDetail.subject,userIds:N(u.schedulePsn,"userId"),startTime:`${e}:00`,endTime:`${a}:00`,recordStatus:i.meetingDetail.recordStatus.toString(),aiStatus:i.meetingDetail.aiStatus.toString(),escaping:i.meetingDetail.escaping.toString(),planType:i.meetingDetail.planType},b.value=i.meetingDetail.recordStatus.toString()==="1",C.value=i.meetingDetail.aiStatus.toString()==="1",z.value=i.meetingDetail.escaping.toString()==="1"}},Y=()=>{s.value={subject:"",userIds:[],startTime:"",endTime:"",recordStatus:"0",aiStatus:"0",escaping:"0"},u.updateSchedulePsn([])},y=()=>{Y(),V("handleClose")},Q=()=>{V("handleInviteOpen")},W=e=>{u.schedulePsn.splice(e,1)},G=async()=>{var e,a;if(!s.value.subject){p.warning(h("meeting.schedule.form.placeholder.schedule"));return}if(!s.value.startTime){p.warning(h("meeting.schedule.form.placeholder.startDate"));return}if(!s.value.userIds||s.value.userIds.length===0){p.warning(h("meeting.schedule.form.placeholder.member"));return}if(s.value.aiStatus=C.value?"1":"0",s.value.recordStatus=b.value?"1":"0",s.value.escaping=b.value?"1":"0",s.value.planId){const l=await u.updateMeetingPlan({...s.value,enableTranslation:(a=s.value)!=null&&a.voiceTranslation?"1":"0"});if(l.code!==200&&l.code!==401){p.error(l.msg);return}p.success(h("meeting.schedule.form.btn.update.schedule"))}else{const l=await u.createScheduleMeeting({...s.value,enableTranslation:(e=s.value)!=null&&e.voiceTranslation?"1":"0"});if(l.code!==200&&l.code!==401){p.error(l.msg);return}p.success(h("meeting.schedule.message.success"))}y()};return ue(()=>u.schedulePsn,e=>{e&&w()},{deep:!0}),re(()=>{w()}),ce(()=>{Y()}),(e,a)=>{const l=ge,g=pe,D=he,J=le,L=ve,X=_e,Z=fe,ee=be,$=ye,ae=De,M=Te;return c(),m("div",Ie,[t("div",{class:"modal-fixed",onClick:y},[t("img",{src:A(Ae),alt:""},null,8,ke)]),t("div",Ve,d(e.$t("meeting.schedule.modal.title")),1),t("div",Ce,[o(ae,{model:s.value,layout:"vertical"},{default:r(()=>[o(g,{field:"subject",label:e.$t("meeting.schedule.form.subject")},{default:r(()=>[o(l,{modelValue:s.value.subject,"onUpdate:modelValue":a[0]||(a[0]=n=>s.value.subject=n),"max-length":255,placeholder:e.$t("meeting.schedule.form.placeholder.schedule")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(g,{field:"startDate",label:e.$t("meeting.schedule.form.startDate")},{default:r(()=>[o(D,{modelValue:f.value,"onUpdate:modelValue":a[1]||(a[1]=n=>f.value=n),class:"schedule-picker-time","show-time":"","time-picker-props":P.value,format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm","disabled-date":x,"disabled-time":R,onOk:q},null,8,["modelValue","time-picker-props"])]),_:1},8,["label"]),t("div",we,[t("div",Ye,[t("div",$e,[t("span",null,d(e.$t("meeting.schedule.form.member")),1)]),t("div",{class:"user-main-header-right",onClick:Q},[t("div",Me,[o(J)]),t("div",Be,[t("span",null,d(e.$t("meeting.schedule.form.btn.add")),1)])])]),t("div",Ee,[s.value.userIds&&s.value.userIds.length>0?(c(),m("div",He,[o(X,{size:10,wrap:""},{default:r(()=>[(c(!0),m(E,null,H(A(u).schedulePsn,(n,B)=>(c(),m("div",{key:`user_${n.userId}_${B}`,class:"users-main-body-main-item"},[t("div",je,[t("img",{src:n.avatarUrl,alt:"avatar"},null,8,Oe)]),o(L,{content:n.name},{default:r(()=>[t("div",Ne,d(n.name),1)]),_:2},1032,["content"]),t("div",{class:"users-main-body-main-item-fixed",onClick:Le=>W(B)},[t("img",{src:A(Se),alt:"del"},null,8,Fe)],8,Ue)]))),128))]),_:1})])):(c(),m("div",Ke,[t("span",null,d(e.$t("meeting.schedule.form.placeholder.member")),1)]))])]),o(g,{style:{"margin-bottom":"0"},"content-class":"schedule-checkbox schedule-checkbox-voice"},{default:r(()=>[t("div",Pe,[t("span",null,d(e.$t("meeting.schedule.form.voiceTranslation")),1),o(Z,{modelValue:s.value.voiceTranslation,"onUpdate:modelValue":a[2]||(a[2]=n=>s.value.voiceTranslation=n),size:"small"},null,8,["modelValue"])]),s.value.voiceTranslation?(c(),m("div",xe,[t("div",Re,d(e.$t("meeting.schedule.form.myLanguage")),1),t("div",null,[o($,{modelValue:s.value.languageType,"onUpdate:modelValue":a[3]||(a[3]=n=>s.value.languageType=n)},{default:r(()=>[(c(!0),m(E,null,H(k.value,n=>(c(),me(ee,{class:"st-img",value:n.value},{default:r(()=>[t("img",{src:n.ctry},null,8,ze),t("span",null,d(n.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])])])):j("",!0),s.value.voiceTranslation&&I.value.length>0?(c(),m("div",qe,[t("div",Qe,d(e.$t("meeting.schedule.form.thesaurus")),1),t("div",null,[o($,{modelValue:s.value.industryType,"onUpdate:modelValue":a[4]||(a[4]=n=>s.value.industryType=n),options:I.value},null,8,["modelValue","options"])]),t("div",We,d(e.$t("meeting.schedule.form.desc")),1)])):j("",!0)]),_:1}),o(g,{"content-class":"schedule-checkbox",field:"recordStatus","hide-label":""})]),_:1},8,["model"])]),t("div",Ge,[o(M,{class:"modal-btn-item",onClick:y},{default:r(()=>[O(d(e.$t("meeting.schedule.form.btn.cancel")),1)]),_:1}),o(M,{class:"modal-btn-item",type:"primary",onClick:G},{default:r(()=>[O(d(e.$t("meeting.schedule.form.btn.schedule")),1)]),_:1})])])}}});const ta=oe(Je,[["__scopeId","data-v-2a7081a5"]]);export{Se as d,ta as s};
