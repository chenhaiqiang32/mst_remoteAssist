import{ab as ae,ad as te,v as le,ap as ne,_ as oe}from"./index.9499b39e.js";/* empty css               */import{d as ie,c as T,j as _,a as de,aS as f,w as ue,o as re,b as ce,C as r,D as c,E as t,u as I,aN as i,aI as n,aH as u,aK as H,aJ as U,aE as me,aF as j,aM as O,aW as g,b5 as pe,bc as ge,bO as ve,b9 as he,b8 as _e,aV as fe,ba as be,bb as ye,bd as De,aX as Ae}from"./arco.638965b6.js";import{c as Se}from"./icon_close.f7fee805.js";import{n as N,g as F}from"./icon_volume_1.fb774a2c.js";const Te="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAAXNSR0IArs4c6QAAARFJREFUKFOVks9KQlEQxn/jHxD0+gq1bFnQA7i8KV58gEDFRYsWCfYYLdq0aCkEig9gd+m+QJcu6xW8i4SrTszRY0QhNYvD4fD9hm/ON8KutFIpUC5fA5eongA5RGbAE4vFo0wmS5OKHRqGx+Tzz4iY8GepzknTC4njN3Gdg2DqxEEASfId8G8GJcmZaBTdAPdO3O/DaATD4RbqdKBWg2bTN7o14AU43wuiCAYDKBbB330DmInW6ykiub0P62pCKwO/xKC6NOADkcIfgZVZmgKnDmi3odE4ZOnVgB5w9+vQrdbWnh96s+n+/1tdcNXqEdlsfDC49TqU8fjdJe0gC7BUuiKTsdWwmVaIzHer8eBX4xNikoAj5wBd+QAAAABJRU5ErkJggg==",Ie={class:"schedule-options-container modal-container"},Ve=["src"],ke={class:"modal-title"},Ce={class:"modal-main wsl-scroll"},$e={class:"users-main"},we={class:"users-main-header"},Ye={class:"user-main-header-left"},Me={class:"user-main-header-right-icon"},Be={class:"user-main-header-right-label"},Ee={class:"users-main-body"},He={key:0,class:"users-main-body-main"},Ue={class:"users-main-body-main-item-top"},je=["src"],Oe={class:"users-main-body-main-item-bot textEllipsis"},Ne=["onClick"],Fe=["src"],Ke={key:1,class:"users-main-body-no-data"},Pe={class:"bx"},xe={key:0,class:"ax"},ze={class:"label"},Re=["src"],Qe={key:1,class:"ax"},We={class:"label"},qe={class:"des"},Ge={class:"bx"},Je={class:"bx"},Le={class:"modal-bot"},Xe=ie({__name:"schedule",props:{meetingDetail:{}},emits:["handleClose","handleInviteOpen"],setup(K,{emit:P}){const d=ae();te();const{t:v,locale:V}=le.exports.useI18n(),k=T(()=>{var s;return(s=d.industryList)==null?void 0:s.map(e=>({label:V.value==="zh-CN"?e.value:e.english,value:e.label}))}),C=T(()=>{var s;return(s=d.languageList)==null?void 0:s.map(e=>({...e,label:V.value==="zh-CN"?e.value:e.english,value:e.label,ctry:e.flagUrl}))}),$=P,o=K,a=_({subject:"",userIds:[],startTime:"",endTime:"",recordStatus:"0",aiStatus:"0",escaping:"0",voiceTranslation:!1,languageType:"cn",industryType:"default"});de(()=>{var e;((e=C.value)==null?void 0:e.some(m=>m.type==="aliyun"))&&(a.value.languageType="zh")});const x=T(()=>{const s=f(),e=s.add(30,"minute");return{defaultValue:e.isAfter(s.endOf("day"))?["00:00:00","01:00:00"]:[`${s.format("HH:mm")}:00`,`${e.format("HH:mm:")}:00`],hideDisabledOptions:!0}}),z=s=>s&&f(s).isBefore(f(),"day"),R=s=>{const e=f();return f(s).isSame(e,"day")?{disabledHours:()=>Array.from({length:e.hour()},(m,p)=>p),disabledMinutes:m=>m===e.hour()?Array.from({length:e.minute()},(p,A)=>A):[],disabledSeconds:()=>[]}:{disabledHours:()=>[],disabledMinutes:()=>[],disabledSeconds:()=>[]}},b=_([]),h=_(a.value.recordStatus==="1"),y=_(a.value.aiStatus==="1"),Q=_(a.value.escaping==="1"),W=s=>{s&&(a.value.startTime=`${s[0]}:00`,a.value.endTime=`${s[1]}:00`)},w=()=>{if(!o.meetingDetail)a.value.userIds=N(d.schedulePsn,"userId");else{d.updateSchedulePsn(o.meetingDetail.invitees);const s=F(o.meetingDetail.startTime,"YYYY-MM-DD HH:mm"),e=F(o.meetingDetail.endTime,"YYYY-MM-DD HH:mm");b.value=[s,e],console.log("handleInitFormData---",o.meetingDetail,b),a.value={planId:o.meetingDetail.planId,subject:o.meetingDetail.subject,userIds:N(d.schedulePsn,"userId"),startTime:`${s}:00`,endTime:`${e}:00`,recordStatus:o.meetingDetail.recordStatus.toString(),aiStatus:o.meetingDetail.aiStatus.toString(),escaping:o.meetingDetail.escaping.toString(),planType:o.meetingDetail.planType},h.value=o.meetingDetail.recordStatus.toString()==="1",y.value=o.meetingDetail.aiStatus.toString()==="1",Q.value=o.meetingDetail.escaping.toString()==="1"}},Y=()=>{a.value={subject:"",userIds:[],startTime:"",endTime:"",recordStatus:"0",aiStatus:"0",escaping:"0"},d.updateSchedulePsn([])},D=()=>{Y(),$("handleClose")},q=()=>{$("handleInviteOpen")},G=s=>{d.schedulePsn.splice(s,1)},J=async()=>{var s;if(!a.value.subject){g.warning(v("meeting.schedule.form.placeholder.schedule"));return}if(!a.value.startTime){g.warning(v("meeting.schedule.form.placeholder.startDate"));return}if(!a.value.userIds||a.value.userIds.length===0){g.warning(v("meeting.schedule.form.placeholder.member"));return}if(a.value.aiStatus=y.value?"1":"0",a.value.recordStatus=h.value?"1":"0",a.value.escaping=h.value?"1":"0",a.value.planId){const e=await d.updateMeetingPlan(a.value);if(e.code!==200&&e.code!==401){g.error(e.msg);return}g.success(v("meeting.schedule.form.btn.update.schedule"))}else{const e=await d.createScheduleMeeting({...a.value,enableTranslation:(s=a.value)!=null&&s.escaping?"1":"0"});if(e.code!==200&&e.code!==401){g.error(e.msg);return}g.success(v("meeting.schedule.message.success"))}D()};return ue(()=>d.schedulePsn,s=>{s&&w()},{deep:!0}),re(()=>{w()}),ce(()=>{Y()}),(s,e)=>{const m=pe,p=ge,A=ve,L=ne,X=he,Z=_e,S=fe,ee=be,M=ye,se=De,B=Ae;return r(),c("div",Ie,[t("div",{class:"modal-fixed",onClick:D},[t("img",{src:I(Se),alt:""},null,8,Ve)]),t("div",ke,i(s.$t("meeting.schedule.modal.title")),1),t("div",Ce,[n(se,{model:a.value,layout:"vertical"},{default:u(()=>[n(p,{field:"subject",label:s.$t("meeting.schedule.form.subject")},{default:u(()=>[n(m,{modelValue:a.value.subject,"onUpdate:modelValue":e[0]||(e[0]=l=>a.value.subject=l),"max-length":255,placeholder:s.$t("meeting.schedule.form.placeholder.schedule")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(p,{field:"startDate",label:s.$t("meeting.schedule.form.startDate")},{default:u(()=>[n(A,{modelValue:b.value,"onUpdate:modelValue":e[1]||(e[1]=l=>b.value=l),class:"schedule-picker-time","show-time":"","time-picker-props":x.value,format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm","disabled-date":z,"disabled-time":R,onOk:W},null,8,["modelValue","time-picker-props"])]),_:1},8,["label"]),t("div",$e,[t("div",we,[t("div",Ye,[t("span",null,i(s.$t("meeting.schedule.form.member")),1)]),t("div",{class:"user-main-header-right",onClick:q},[t("div",Me,[n(L)]),t("div",Be,[t("span",null,i(s.$t("meeting.schedule.form.btn.add")),1)])])]),t("div",Ee,[a.value.userIds&&a.value.userIds.length>0?(r(),c("div",He,[n(Z,{size:10,wrap:""},{default:u(()=>[(r(!0),c(H,null,U(I(d).schedulePsn,(l,E)=>(r(),c("div",{key:`user_${l.userId}_${E}`,class:"users-main-body-main-item"},[t("div",Ue,[t("img",{src:l.avatarUrl,alt:"avatar"},null,8,je)]),n(X,{content:l.name},{default:u(()=>[t("div",Oe,i(l.name),1)]),_:2},1032,["content"]),t("div",{class:"users-main-body-main-item-fixed",onClick:Ze=>G(E)},[t("img",{src:I(Te),alt:"del"},null,8,Fe)],8,Ne)]))),128))]),_:1})])):(r(),c("div",Ke,[t("span",null,i(s.$t("meeting.schedule.form.placeholder.member")),1)]))])]),n(p,{style:{"margin-bottom":"0"},"content-class":"schedule-checkbox schedule-checkbox-voice"},{default:u(()=>[t("div",Pe,[t("span",null,i(s.$t("meeting.schedule.form.voiceTranslation")),1),n(S,{modelValue:a.value.voiceTranslation,"onUpdate:modelValue":e[2]||(e[2]=l=>a.value.voiceTranslation=l),size:"small"},null,8,["modelValue"])]),a.value.voiceTranslation?(r(),c("div",xe,[t("div",ze,i(s.$t("meeting.schedule.form.myLanguage")),1),t("div",null,[n(M,{modelValue:a.value.languageType,"onUpdate:modelValue":e[3]||(e[3]=l=>a.value.languageType=l)},{default:u(()=>[(r(!0),c(H,null,U(C.value,l=>(r(),me(ee,{class:"st-img",value:l.value},{default:u(()=>[t("img",{src:l.ctry},null,8,Re),t("span",null,i(l.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])])])):j("",!0),a.value.voiceTranslation&&k.value.length>0?(r(),c("div",Qe,[t("div",We,i(s.$t("meeting.schedule.form.thesaurus")),1),t("div",null,[n(M,{modelValue:a.value.industryType,"onUpdate:modelValue":e[4]||(e[4]=l=>a.value.industryType=l),options:k.value},null,8,["modelValue","options"])]),t("div",qe,i(s.$t("meeting.schedule.form.desc")),1)])):j("",!0)]),_:1}),n(p,{"content-class":"schedule-checkbox",field:"recordStatus","hide-label":""},{default:u(()=>[t("div",Ge,[t("span",null,i(s.$t("meeting.schedule.form.cloud.record")),1),n(S,{modelValue:h.value,"onUpdate:modelValue":e[5]||(e[5]=l=>h.value=l),size:"small"},null,8,["modelValue"])]),t("div",Je,[t("span",null,i(s.$t("meeting.schedule.form.ai.summary")),1),n(S,{modelValue:y.value,"onUpdate:modelValue":e[6]||(e[6]=l=>y.value=l),size:"small"},null,8,["modelValue"])])]),_:1})]),_:1},8,["model"])]),t("div",Le,[n(B,{class:"modal-btn-item",onClick:D},{default:u(()=>[O(i(s.$t("meeting.schedule.form.btn.cancel")),1)]),_:1}),n(B,{class:"modal-btn-item",type:"primary",onClick:J},{default:u(()=>[O(i(s.$t("meeting.schedule.form.btn.schedule")),1)]),_:1})])])}}});const ns=oe(Xe,[["__scopeId","data-v-62dc7e79"]]);export{Te as d,ns as s};
