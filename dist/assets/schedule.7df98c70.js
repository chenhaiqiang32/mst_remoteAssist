import{ab as se,ad as te,v as ne,aq as le,_ as oe}from"./index.9835b368.js";/* empty css               */import{d as ie,c as D,j as v,aS as _,w as de,o as ue,b as re,C as c,D as m,E as t,u as S,aN as u,aI as o,aH as r,aK as B,aJ as H,aE as ce,aF as j,aM as E,aW as p,b5 as me,bc as ge,bO as pe,b9 as he,b8 as ve,aV as _e,ba as be,bb as fe,bd as ye,aX as Te}from"./arco.638965b6.js";import{c as De}from"./icon_close.f7fee805.js";import{p as O,g as N}from"./icon_volume_1.148c46df.js";const Se="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAAXNSR0IArs4c6QAAARFJREFUKFOVks9KQlEQxn/jHxD0+gq1bFnQA7i8KV58gEDFRYsWCfYYLdq0aCkEig9gd+m+QJcu6xW8i4SrTszRY0QhNYvD4fD9hm/ON8KutFIpUC5fA5eongA5RGbAE4vFo0wmS5OKHRqGx+Tzz4iY8GepzknTC4njN3Gdg2DqxEEASfId8G8GJcmZaBTdAPdO3O/DaATD4RbqdKBWg2bTN7o14AU43wuiCAYDKBbB330DmInW6ykiub0P62pCKwO/xKC6NOADkcIfgZVZmgKnDmi3odE4ZOnVgB5w9+vQrdbWnh96s+n+/1tdcNXqEdlsfDC49TqU8fjdJe0gC7BUuiKTsdWwmVaIzHer8eBX4xNikoAj5wBd+QAAAABJRU5ErkJggg==",Ae={class:"schedule-options-container modal-container"},Ie=["src"],ke={class:"modal-title"},Ve={class:"modal-main wsl-scroll"},Ce={class:"users-main"},we={class:"users-main-header"},Ye={class:"user-main-header-left"},$e={class:"user-main-header-right-icon"},Me={class:"user-main-header-right-label"},Be={class:"users-main-body"},He={key:0,class:"users-main-body-main"},je={class:"users-main-body-main-item-top"},Ee=["src"],Oe={class:"users-main-body-main-item-bot textEllipsis"},Ne=["onClick"],Ue=["src"],Fe={key:1,class:"users-main-body-no-data"},Ke={class:"bx"},Pe={key:0,class:"ax"},xe={class:"label"},Re=["src"],ze={key:1,class:"ax"},Le={class:"label"},qe={class:"des"},Qe={class:"modal-bot"},We=ie({__name:"schedule",props:{meetingDetail:{}},emits:["handleClose","handleInviteOpen"],setup(U,{emit:F}){const d=se();te();const{t:h,locale:A}=ne.exports.useI18n(),I=D(()=>{var e;return(e=d.industryList)==null?void 0:e.map(a=>({label:A.value==="zh-CN"?a.value:a.english,value:a.label}))}),K=D(()=>{var e;return(e=d.languageList)==null?void 0:e.map(a=>({...a,label:A.value==="zh-CN"?a.value:a.english,value:a.label,ctry:a.flagUrl}))});console.log("countryList---",d.languageList);const k=F,l=U,s=v({subject:"",userIds:[],startTime:"",endTime:"",recordStatus:"0",aiStatus:"0",escaping:"0",voiceTranslation:!1,languageType:"zh",industryType:"default"}),P=D(()=>{const e=_(),a=e.add(30,"minute");return{defaultValue:a.isAfter(e.endOf("day"))?["00:00:00","01:00:00"]:[`${e.format("HH:mm")}:00`,`${a.format("HH:mm:")}:00`],hideDisabledOptions:!0}}),x=e=>e&&_(e).isBefore(_(),"day"),R=e=>{const a=_();return _(e).isSame(a,"day")?{disabledHours:()=>Array.from({length:a.hour()},(i,g)=>g),disabledMinutes:i=>i===a.hour()?Array.from({length:a.minute()},(g,T)=>T):[],disabledSeconds:()=>[]}:{disabledHours:()=>[],disabledMinutes:()=>[],disabledSeconds:()=>[]}},b=v([]),f=v(s.value.recordStatus==="1"),V=v(s.value.aiStatus==="1"),z=v(s.value.escaping==="1"),L=e=>{e&&(s.value.startTime=`${e[0]}:00`,s.value.endTime=`${e[1]}:00`)},C=()=>{if(!l.meetingDetail)s.value.userIds=O(d.schedulePsn,"userId");else{d.updateSchedulePsn(l.meetingDetail.invitees);const e=N(l.meetingDetail.startTime,"YYYY-MM-DD HH:mm"),a=N(l.meetingDetail.endTime,"YYYY-MM-DD HH:mm");b.value=[e,a],console.log("handleInitFormData---",l.meetingDetail,b),s.value={planId:l.meetingDetail.planId,subject:l.meetingDetail.subject,userIds:O(d.schedulePsn,"userId"),startTime:`${e}:00`,endTime:`${a}:00`,recordStatus:l.meetingDetail.recordStatus.toString(),aiStatus:l.meetingDetail.aiStatus.toString(),escaping:l.meetingDetail.escaping.toString(),planType:l.meetingDetail.planType,voiceTranslation:l.meetingDetail.enableTranslation===1,languageType:l.meetingDetail.languageType,industryType:l.meetingDetail.industryType},f.value=l.meetingDetail.recordStatus.toString()==="1",V.value=l.meetingDetail.aiStatus.toString()==="1",z.value=l.meetingDetail.escaping.toString()==="1"}},w=()=>{s.value={subject:"",userIds:[],startTime:"",endTime:"",recordStatus:"0",aiStatus:"0",escaping:"0"},d.updateSchedulePsn([])},y=()=>{w(),k("handleClose")},q=()=>{k("handleInviteOpen")},Q=e=>{d.schedulePsn.splice(e,1)},W=async()=>{var e,a;if(!s.value.subject){p.warning(h("meeting.schedule.form.placeholder.schedule"));return}if(!s.value.startTime){p.warning(h("meeting.schedule.form.placeholder.startDate"));return}if(!s.value.userIds||s.value.userIds.length===0){p.warning(h("meeting.schedule.form.placeholder.member"));return}if(s.value.aiStatus=V.value?"1":"0",s.value.recordStatus=f.value?"1":"0",s.value.escaping=f.value?"1":"0",s.value.planId){const i=await d.updateMeetingPlan({...s.value,enableTranslation:(a=s.value)!=null&&a.voiceTranslation?"1":"0"});if(i.code!==200&&i.code!==401){p.error(i.msg);return}p.success(h("meeting.schedule.form.btn.update.schedule"))}else{const i=await d.createScheduleMeeting({...s.value,enableTranslation:(e=s.value)!=null&&e.voiceTranslation?"1":"0"});if(i.code!==200&&i.code!==401){p.error(i.msg);return}p.success(h("meeting.schedule.message.success"))}y()};return de(()=>d.schedulePsn,e=>{e&&C()},{deep:!0}),ue(()=>{C()}),re(()=>{w()}),(e,a)=>{const i=me,g=ge,T=pe,G=le,J=he,X=ve,Z=_e,ee=be,Y=fe,ae=ye,$=Te;return c(),m("div",Ae,[t("div",{class:"modal-fixed",onClick:y},[t("img",{src:S(De),alt:""},null,8,Ie)]),t("div",ke,u(e.$t("meeting.schedule.modal.title")),1),t("div",Ve,[o(ae,{model:s.value,layout:"vertical"},{default:r(()=>[o(g,{field:"subject",label:e.$t("meeting.schedule.form.subject")},{default:r(()=>[o(i,{modelValue:s.value.subject,"onUpdate:modelValue":a[0]||(a[0]=n=>s.value.subject=n),"max-length":255,placeholder:e.$t("meeting.schedule.form.placeholder.schedule")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(g,{field:"startDate",label:e.$t("meeting.schedule.form.startDate")},{default:r(()=>[o(T,{modelValue:b.value,"onUpdate:modelValue":a[1]||(a[1]=n=>b.value=n),class:"schedule-picker-time","show-time":"","time-picker-props":P.value,format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm","disabled-date":x,"disabled-time":R,onOk:L},null,8,["modelValue","time-picker-props"])]),_:1},8,["label"]),t("div",Ce,[t("div",we,[t("div",Ye,[t("span",null,u(e.$t("meeting.schedule.form.member")),1)]),t("div",{class:"user-main-header-right",onClick:q},[t("div",$e,[o(G)]),t("div",Me,[t("span",null,u(e.$t("meeting.schedule.form.btn.add")),1)])])]),t("div",Be,[s.value.userIds&&s.value.userIds.length>0?(c(),m("div",He,[o(X,{size:10,wrap:""},{default:r(()=>[(c(!0),m(B,null,H(S(d).schedulePsn,(n,M)=>(c(),m("div",{key:`user_${n.userId}_${M}`,class:"users-main-body-main-item"},[t("div",je,[t("img",{src:n.avatarUrl,alt:"avatar"},null,8,Ee)]),o(J,{content:n.name},{default:r(()=>[t("div",Oe,u(n.name),1)]),_:2},1032,["content"]),t("div",{class:"users-main-body-main-item-fixed",onClick:Ge=>Q(M)},[t("img",{src:S(Se),alt:"del"},null,8,Ue)],8,Ne)]))),128))]),_:1})])):(c(),m("div",Fe,[t("span",null,u(e.$t("meeting.schedule.form.placeholder.member")),1)]))])]),o(g,{style:{"margin-bottom":"0"},"content-class":"schedule-checkbox schedule-checkbox-voice"},{default:r(()=>[t("div",Ke,[t("span",null,u(e.$t("meeting.schedule.form.voiceTranslation")),1),o(Z,{modelValue:s.value.voiceTranslation,"onUpdate:modelValue":a[2]||(a[2]=n=>s.value.voiceTranslation=n),size:"small"},null,8,["modelValue"])]),s.value.voiceTranslation?(c(),m("div",Pe,[t("div",xe,u(e.$t("meeting.schedule.form.myLanguage")),1),t("div",null,[o(Y,{modelValue:s.value.languageType,"onUpdate:modelValue":a[3]||(a[3]=n=>s.value.languageType=n)},{default:r(()=>[(c(!0),m(B,null,H(K.value,n=>(c(),ce(ee,{class:"st-img",value:n.value},{default:r(()=>[t("img",{src:n.ctry},null,8,Re),t("span",null,u(n.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])])])):j("",!0),s.value.voiceTranslation&&I.value.length>0?(c(),m("div",ze,[t("div",Le,u(e.$t("meeting.schedule.form.thesaurus")),1),t("div",null,[o(Y,{modelValue:s.value.industryType,"onUpdate:modelValue":a[4]||(a[4]=n=>s.value.industryType=n),options:I.value},null,8,["modelValue","options"])]),t("div",qe,u(e.$t("meeting.schedule.form.desc")),1)])):j("",!0)]),_:1}),o(g,{"content-class":"schedule-checkbox",field:"recordStatus","hide-label":""})]),_:1},8,["model"])]),t("div",Qe,[o($,{class:"modal-btn-item",onClick:y},{default:r(()=>[E(u(e.$t("meeting.schedule.form.btn.cancel")),1)]),_:1}),o($,{class:"modal-btn-item",type:"primary",onClick:W},{default:r(()=>[E(u(e.$t("meeting.schedule.form.btn.schedule")),1)]),_:1})])])}}});const sa=oe(We,[["__scopeId","data-v-c9dc1e4e"]]);export{Se as d,sa as s};
