import{v as X,aa as W,u as Y,_ as ee,e as fe,Q as Ie,C as J,M as ye,a9 as Ce,ac as $e,d as ke,ah as ie,E as Me}from"./index.56b53071.js";import{C as o,D as O,E as e,d as te,j as w,w as ue,o as we,b as Se,aE as f,aH as d,F as N,aN as _,aI as u,u as b,aK as F,aJ as z,b2 as re,aW as V,aX as ne,bG as oe,bH as me,bI as Oe,bJ as xe,bK as ae,c as Te,aM as j,b6 as le,bL as _e,bM as pe,aF as U,bc as Le}from"./arco.7c13ffb5.js";import{n as D,O as q,p as Pe}from"./icon_volume_1.11c747fb.js";import{s as Ae}from"./schedule.d06c593f.js";import{S as Q,a as K,o as Ne,I as Ee}from"./invite.42d13073.js";import{o as He}from"./index.4818ad0f.js";/* empty css               */import{c as Ve}from"./icon_close.f7fee805.js";import{f as Ze}from"./vue.671e172d.js";import"./chart.a30fa8da.js";/* empty css               */const Re={width:"24",height:"24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Ue(Z,m){return o(),O("svg",Re,m[0]||(m[0]=[e("g",{fill:"#28C445"},[e("path",{d:"M17.62 10.75a.77.77 0 0 1-.77-.77c0-.37-.37-1.14-.99-1.81-.61-.65-1.28-1.03-1.84-1.03a.77.77 0 0 1-.77-.77c0-.42.35-.77.77-.77 1 0 2.05.54 2.97 1.51.86.91 1.41 2.04 1.41 2.86 0 .43-.35.78-.78.78ZM21.232 10.75a.77.77 0 0 1-.77-.77c0-3.55-2.89-6.43-6.43-6.43a.77.77 0 0 1-.77-.77c0-.42.34-.78.76-.78 4.4 0 7.98 3.58 7.98 7.98 0 .42-.35.77-.77.77ZM11.05 14.95 9.2 16.8c-.39.39-1.01.39-1.41.01-.11-.11-.22-.21-.33-.32a28.414 28.414 0 0 1-2.79-3.27c-.82-1.14-1.48-2.28-1.96-3.41C2.24 8.67 2 7.58 2 6.54c0-.68.12-1.33.36-1.93.24-.61.62-1.17 1.15-1.67C4.15 2.31 4.85 2 5.59 2c.28 0 .56.06.81.18.26.12.49.3.67.56l2.32 3.27c.18.25.31.48.4.7.09.21.14.42.14.61 0 .24-.07.48-.21.71-.13.23-.32.47-.56.71l-.76.79c-.11.11-.16.24-.16.4 0 .08.01.15.03.23.03.08.06.14.08.2.18.33.49.76.93 1.28.45.52.93 1.05 1.45 1.58.1.1.21.2.31.3.4.39.41 1.03.01 1.43ZM21.972 18.33c0 .28-.05.57-.15.85-.03.08-.06.16-.1.24-.17.36-.39.7-.68 1.02-.49.54-1.03.93-1.64 1.18-.01 0-.02.01-.03.01-.59.24-1.23.37-1.92.37-1.02 0-2.11-.24-3.26-.73s-2.3-1.15-3.44-1.98c-.39-.29-.78-.58-1.15-.89l3.27-3.27c.28.21.53.37.74.48.05.02.11.05.18.08.08.03.16.04.25.04.17 0 .3-.06.41-.17l.76-.75c.25-.25.49-.44.72-.56.23-.14.46-.21.71-.21.19 0 .39.04.61.13.22.09.45.22.7.39l3.31 2.35c.26.18.44.39.55.64.1.25.16.5.16.78Z"})],-1)]))}const de={render:Ue},Ge={class:"member-container"},Be={class:"member-top"},De={class:"member-top-btn"},je={class:"member-tabs"},Fe={class:"member-top-btn-r"},ze={class:"member-search"},Je={class:"member-content wsl-scroll"},qe=["onClick"],Qe={class:"member-content-item-left"},Ke={class:"member-content-item-right"},Xe={class:"member-content-item-right-left"},We=["src"],Ye={class:"member-content-item-right-right"},et={class:"member-content-item-right-right-top"},tt={class:"member-content-item-right-right-bot"},st=["onClick"],nt={class:"header-main"},ot={class:"header-main-left"},at=["src"],lt={class:"header-main-title"},ct=["onClick"],it={class:"member-content-item-left"},rt={class:"member-content-item-right"},dt={class:"member-content-item-right-left"},ut=["src"],mt={class:"member-content-item-right-right"},_t={class:"member-content-item-right-right-top"},pt={class:"member-content-item-right-right-bot"},ht=["onClick"],vt=te({__name:"member",emits:["handleOptionCallOpen","handleChangePage"],setup(Z,{emit:m}){const t=m,{t:x}=X.exports.useI18n(),i=W(),T=Y(),C=w(1),v=w([]),p=w([]),I=w(i.selectPsn),g=w({condition:""}),S=async()=>{v.value=i.memberList},G=async()=>{p.value=i.memberGroupList},R=()=>{if(!g.value.condition)return i.memberList;const s=g.value.condition.toLowerCase();return i.memberList.filter(a=>a.name.toLowerCase().includes(s))},B=()=>{if(!g.value.condition)return i.memberGroupList;const s=g.value.condition.toLowerCase();return i.memberGroupList.map(a=>({...a,contacts:a.contacts.filter(c=>c.name.toLowerCase().includes(s))})).filter(a=>a.contacts.length>0)},A=async()=>{C.value===1?v.value=R():C.value===2&&(p.value=B())},E=s=>{C.value=s,g.value.condition="",C.value===2?G():S()},h=s=>I.value.some(a=>a.userId===s),k=(s,a)=>{if(s.userId===T.userId&&!a){V.info(x("meeting.call.me"));return}const c=I.value.findIndex(M=>M.userId===s.userId);c===-1?I.value.length<i.limitMember?I.value.push(s):V.error(`${x("meeting.member.limit.member.tip")} ${i.limitMember}`):I.value.splice(c,1),i.updateAddressSelectPsn(I.value)},n=w("right"),$=s=>{t("handleOptionCallOpen",[s])},l=()=>{I.value=[],i.updateAddressSelectPsn([])},r=()=>{t("handleChangePage",1)};ue(()=>[i.selectPsn,i.memberList],s=>{s[0]&&(I.value=i.selectPsn),s[1]&&E(C.value)});const L=()=>{setTimeout(()=>{const s=i.memberList.find(a=>a.userId===T.userId);k(s,!0)},500)};return we(()=>{S(),L()}),Se(()=>{l()}),(s,a)=>{const c=ne,M=oe,H=me,ce=Oe,he=xe,ve=ae;return o(),f(ve,{class:"general-card member-panel",bordered:!1,"body-style":{height:"100%",display:"flex",padding:0,flexFlow:"column"}},{default:d(()=>[e("div",Ge,[e("div",Be,[e("div",De,[e("div",je,[e("div",{class:N(["member-tab",C.value===1?"active":""]),onClick:a[0]||(a[0]=y=>E(1))},[e("span",null,_(s.$t("meeting.member.tabs.all")),1)],2),e("div",{class:N(["member-tab",C.value===2?"active":""]),onClick:a[1]||(a[1]=y=>E(2))},[e("span",null,_(s.$t("meeting.member.tabs.group")),1)],2)]),e("div",Fe,[u(c,{onClick:r},{default:d(()=>[e("span",null,_(b(x)("meeting.member.left.btn.concat.qr")),1)]),_:1})])]),u(M,{margin:0}),e("div",ze,[u(H,{modelValue:g.value.condition,"onUpdate:modelValue":a[2]||(a[2]=y=>g.value.condition=y),size:"large",style:{width:"100%"},placeholder:s.$t("meeting.member.tabs.search"),onInput:A},null,8,["modelValue","placeholder"])])]),e("div",Je,[C.value===1?(o(!0),O(F,{key:0},z(v.value,(y,se)=>(o(),O("div",{key:`member_${se}`,class:N(["member-content-item",h(y.userId)?"selected":""]),onClick:P=>k(y)},[e("div",Qe,[h(y.userId)?(o(),f(b(Q),{key:0})):(o(),f(b(K),{key:1}))]),e("div",Ke,[e("div",Xe,[e("img",{src:y.avatarUrl,alt:""},null,8,We),e("div",{class:N(["member-online",y.pcOnline||y.glassOnline||y.androidOnline?"online":"outline"])},null,2)]),e("div",Ye,[e("div",et,[e("span",null,_(y.name),1)]),e("div",tt,[e("span",null,_(y.alias),1)])])]),e("div",{class:N({"member-content-item-btn":!0,"member-content-item-btn-my":y.userId===b(T).userId}),onClick:re(P=>$(y),["stop"])},[u(b(de))],10,st)],10,qe))),128)):(o(),f(he,{key:1,bordered:!1,"expand-icon-position":n.value},{default:d(()=>[(o(!0),O(F,null,z(p.value,(y,se)=>(o(),f(ce,{key:`group_${se}`},{header:d(()=>[e("div",nt,[e("div",ot,[e("img",{src:b(Ne),alt:""},null,8,at)]),e("div",lt,[e("span",null,_(y.groupName)+" ("+_(y.contacts.length)+")",1)])])]),default:d(()=>[(o(!0),O(F,null,z(y.contacts,(P,ge)=>(o(),O("div",{key:`member_${ge}`,class:N(["member-content-item",h(P.userId)?"selected":""]),onClick:be=>k(P)},[e("div",it,[h(P.userId)?(o(),f(b(Q),{key:0,size:"12"})):(o(),f(b(K),{key:1,size:"12"}))]),e("div",rt,[e("div",dt,[e("img",{src:P.avatarUrl,alt:""},null,8,ut),e("div",{class:N(["member-online",P.pcOnline||P.glassOnline||P.androidOnline?"online":"outline"])},null,2)]),e("div",mt,[e("div",_t,[e("span",null,_(P.name),1)]),e("div",pt,[e("span",null,_(P.alias),1)])])]),e("div",{class:N({"member-content-item-btn":!0,"member-content-item-btn-my":P.userId===b(T).userId}),onClick:re(be=>$(P),["stop"])},[u(b(de))],10,ht)],10,ct))),128))]),_:2},1024))),128))]),_:1},8,["expand-icon-position"]))])])]),_:1})}}});const gt=ee(vt,[["__scopeId","data-v-1f32146b"]]),bt={width:"16",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function ft(Z,m){return o(),O("svg",bt,m[0]||(m[0]=[e("g",{stroke:"#fff","stroke-width":"1.2"},[e("path",{d:"M14.645 12.22c0 .24-.053.486-.166.726a2.75 2.75 0 0 1-.454.68c-.326.36-.686.62-1.093.787-.4.167-.833.253-1.3.253-.68 0-1.407-.16-2.173-.486a11.713 11.713 0 0 1-2.294-1.32 19.164 19.164 0 0 1-2.186-1.867 18.939 18.939 0 0 1-1.86-2.18c-.547-.76-.987-1.52-1.307-2.273-.32-.76-.48-1.487-.48-2.18 0-.454.08-.887.24-1.287.16-.407.413-.78.767-1.113.426-.42.893-.627 1.386-.627.187 0 .374.04.54.12.174.08.327.2.447.373l1.547 2.18c.12.167.206.32.266.467.06.14.094.28.094.407 0 .16-.047.32-.14.473a2.268 2.268 0 0 1-.374.473l-.506.527a.357.357 0 0 0-.107.267c0 .053.007.1.02.153.02.053.04.093.053.133.12.22.327.507.62.854.3.346.62.7.967 1.053.36.353.707.68 1.06.98.347.293.633.493.86.613.033.014.073.034.12.054a.46.46 0 0 0 .167.026c.113 0 .2-.04.273-.113l.507-.5c.166-.167.326-.293.48-.373a.888.888 0 0 1 .473-.14c.127 0 .26.026.407.086.146.06.3.147.466.26l2.207 1.567c.173.12.293.26.367.427.066.166.106.333.106.52Z","stroke-miterlimit":"10"}),e("path",{d:"M12.333 6c0-.4-.313-1.014-.78-1.514-.426-.46-.993-.82-1.553-.82M14.667 6A4.663 4.663 0 0 0 10 1.333","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))}const It={render:ft},yt={width:"16",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Ct(Z,m){return o(),O("svg",yt,m[0]||(m[0]=[e("g",{"fill-rule":"evenodd","clip-rule":"evenodd",fill:"#fff"},[e("path",{d:"M5.332.833a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2a.5.5 0 0 1 .5-.5ZM10.668.833a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2a.5.5 0 0 1 .5-.5ZM1.832 6.06a.5.5 0 0 1 .5-.5h11.333a.5.5 0 0 1 0 1H2.332a.5.5 0 0 1-.5-.5Z"}),e("path",{d:"M3.158 3.59c-.427.46-.658 1.153-.658 2.076v5.667c0 .923.23 1.616.658 2.076.421.454 1.104.757 2.175.757h5.334c1.071 0 1.754-.303 2.175-.757.427-.46.658-1.153.658-2.076V5.666c0-.923-.23-1.616-.658-2.076-.421-.453-1.104-.757-2.175-.757H5.333c-1.071 0-1.754.304-2.175.757Zm-.733-.68c.663-.714 1.646-1.077 2.908-1.077h5.334c1.262 0 2.245.363 2.908 1.076.656.707.925 1.68.925 2.757v5.667c0 1.077-.27 2.05-.925 2.757-.663.713-1.646 1.076-2.908 1.076H5.333c-1.262 0-2.245-.363-2.908-1.076-.656-.707-.925-1.68-.925-2.757V5.666c0-1.076.27-2.05.925-2.757Z"}),e("path",{d:"M9.797 9.133c0-.368.298-.666.666-.666h.007a.667.667 0 1 1 0 1.333h-.007a.667.667 0 0 1-.666-.667ZM9.797 11.133c0-.368.298-.666.666-.666h.007a.667.667 0 0 1 0 1.333h-.007a.667.667 0 0 1-.666-.667ZM7.332 9.133c0-.368.299-.666.667-.666h.006a.667.667 0 1 1 0 1.333h-.006a.667.667 0 0 1-.667-.667ZM7.332 11.133c0-.368.299-.666.667-.666h.006a.667.667 0 0 1 0 1.333h-.006a.667.667 0 0 1-.667-.667ZM4.863 9.133c0-.368.299-.666.667-.666h.006a.667.667 0 1 1 0 1.333H5.53a.667.667 0 0 1-.667-.667ZM4.863 11.133c0-.368.299-.666.667-.666h.006a.667.667 0 0 1 0 1.333H5.53a.667.667 0 0 1-.667-.667Z"})],-1)]))}const $t={render:Ct},kt={width:"16",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Mt(Z,m){return o(),O("svg",kt,m[0]||(m[0]=[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.525 4.5a3.551 3.551 0 0 0-.457.025c-.806.069-1.34.333-1.68.734-.347.407-.556 1.028-.556 1.934V9.86c0 1.29.263 1.9.628 2.22.382.334 1.01.473 2.065.473h.267c.175 0 .338.056.461.118.124.063.261.159.363.292l.003.004.8 1.067c.098.13.19.154.24.154.05 0 .142-.023.239-.154l.8-1.067c.195-.26.503-.414.827-.414h.267c.907 0 1.528-.207 1.935-.553.4-.34.665-.873.733-1.682a3.555 3.555 0 0 0 .025-.458V7.193c0-.986-.246-1.634-.652-2.04-.406-.406-1.055-.653-2.041-.653H4.525Zm-.552-.97c.185-.023.37-.03.552-.03h4.267c1.14 0 2.089.286 2.748.946.659.659.945 1.607.945 2.747V9.86c0 .182-.006.367-.029.552-.086.986-.428 1.796-1.082 2.35-.65.552-1.535.791-2.582.791h-.267c-.003 0-.008.001-.014.004a.034.034 0 0 0-.012.01l-.8 1.065c-.256.343-.627.556-1.04.556-.413 0-.785-.213-1.04-.555l-.79-1.053a.183.183 0 0 0-.052-.027h-.252c-1.071 0-2.04-.124-2.723-.72-.7-.61-.97-1.597-.97-2.973V7.193c0-1.047.241-1.932.793-2.582.556-.654 1.365-.996 2.348-1.082Z",fill:"#fff"},null,-1),e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.617 3.5h4.177c1.14 0 2.089.286 2.748.945.659.66.945 1.607.945 2.748v2.578c.5-.123.86-.344 1.112-.641.346-.406.555-1.027.555-1.937V4.526c0-.986-.247-1.634-.653-2.04-.406-.406-1.054-.653-2.04-.653H7.194c-.906 0-1.527.209-1.934.555-.298.253-.52.613-.643 1.112Zm-.005-1.874c.65-.552 1.535-.793 2.582-.793h4.267c1.14 0 2.088.286 2.747.946.66.659.946 1.607.946 2.747v2.667c0 1.05-.24 1.936-.793 2.585-.559.655-1.371.995-2.358 1.08a.5.5 0 0 1-.539-.56c.017-.133.023-.277.023-.438V7.193c0-.986-.246-1.635-.652-2.04-.406-.406-1.055-.653-2.041-.653H4.527c-.161 0-.306.006-.438.022a.5.5 0 0 1-.56-.538c.085-.988.427-1.8 1.083-2.358Z",fill:"#fff"},null,-1),e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.332 8.834c0-.369.299-.667.667-.667h.006a.667.667 0 0 1 0 1.333h-.006a.667.667 0 0 1-.667-.666ZM5.996 8.834c0-.369.299-.667.667-.667h.006a.667.667 0 0 1 0 1.333h-.006a.667.667 0 0 1-.667-.666ZM3.664 8.834c0-.369.299-.667.667-.667h.006a.667.667 0 0 1 0 1.333H4.33a.667.667 0 0 1-.667-.666Z",fill:"#fff"},null,-1)]))}const wt={render:Mt},St={class:"select-container"},Ot={class:"select-top"},xt={class:"select-top-right"},Tt={class:"select-main wsl-scroll"},Lt={class:"block-item-grid"},Pt={class:"block-item-grid-left"},At={class:"block-item-grid-left-icon"},Nt=["src"],Et={class:"block-item-grid-right"},Ht={class:"block-item-grid-right-top"},Vt={class:"block-item-grid-right-bot"},Zt=["onClick"],Rt=["src"],Ut="ChatDB",Gt=te({__name:"select",emits:["handleScheduleOpen","handleOptionCallOpen"],setup(Z,{emit:m}){const{addConversation:t,getAllConversations:x}=fe(Ut),i=Y(),T=m,{t:C}=X.exports.useI18n(),v=Ze(),p=W(),I=Ie(),g=w(p.selectPsn);ue(()=>p.selectPsn,n=>{g.value=n},{immediate:!0,deep:!0});const S=Te(()=>g.value.length===1&&g.value.some(n=>n.userId===i.userId)?!0:!(g.value.length>0)),G=()=>{T("handleOptionCallOpen",p.selectPsn.filter(n=>n.userId!==i.userId))},R=async n=>{const $={conversationId:`${J.PRIVATE_CHAT}_${n.userId}`,targetId:n.userId,targetName:n.name,targetAvatarUrl:n.avatarUrl,unreadCount:0,sendTime:Date.now(),name:n.name,messageType:ye.TEXT,content:"",chatType:J.PRIVATE_CHAT,status:1};await t($);const l=await x();I.updateConversationList(l),I.updateCurConversation(q($))},B=async()=>{const n=g.value.filter($=>$.userId!==i.userId);if(n.length>1){let l=D(n,"name").join("\u3001");l=l.length>50?`${l.substring(0,46)}...`:l;const r=await I.createGroup({groupName:l,userIds:D(n,"userId")});if(r.code!==200&&r.code!==401){V.error(r.msg);return}V.success(C("meeting.member.create.group.success")),I.updateCurConversation({targetId:r.data.groupId,targetName:r.data.groupName,chatType:J.GROUP_CHAT,conversationId:`${J.GROUP_CHAT}_${r.data.groupId}`,targetAvatarUrl:r.data.avatarUrl}),v.push({name:"MessageList"})}else await R(q(n[0])),v.push({name:"MessageList"})},A=w(p.limitMember),E=(n,$)=>{if($.userId===i.userId){V.info(C("meeting.call.me"));return}p.selectPsn.splice(n,1)},h=()=>{const n=p.selectPsn.filter($=>$.userId===i.userId);p.clearAddressSelectPsn(n)},k=()=>{T("handleScheduleOpen")};return(n,$)=>{const l=ne,r=le,L=oe,s=ae,a=_e,c=pe;return o(),f(s,{class:"general-card select-panel",bordered:!1,"body-style":{height:"100%",display:"flex",padding:0,flexFlow:"column"}},{default:d(()=>[e("div",St,[e("div",Ot,[e("div",{class:N(["select-top-left",g.value.length>0?"":"disabled"])},[e("span",null,_(n.$t("meeting.member.right.title"))+" ("+_(g.value.length)+"/"+_(A.value)+") "+_(n.$t("meeting.member.right.title.dw")),1)],2),e("div",xt,[u(r,null,{default:d(()=>[u(l,{type:"primary",class:"btn-item",disabled:S.value,onClick:G},{icon:d(()=>[u(b(It))]),default:d(()=>[j(" "+_(n.$t("meeting.member.right.btn.call")),1)]),_:1},8,["disabled"]),u(l,{type:"primary",class:"btn-item",disabled:S.value,onClick:k},{icon:d(()=>[u(b($t))]),default:d(()=>[j(_(n.$t("meeting.member.right.btn.yyhy")),1)]),_:1},8,["disabled"]),u(l,{type:"primary",class:"btn-item",disabled:S.value,onClick:B},{icon:d(()=>[u(b(wt))]),default:d(()=>[j(_(g.value.length>1?n.$t("meeting.member.right.btn.fqql"):n.$t("meeting.member.right.btn.fqlt")),1)]),_:1},8,["disabled"]),u(l,{type:"outline",class:"btn-item",status:"danger",disabled:S.value,onClick:h},{default:d(()=>[j(_(n.$t("meeting.member.right.btn.clear")),1)]),_:1},8,["disabled"])]),_:1})])]),u(L,{margin:0}),e("div",Tt,[u(c,{gutter:[16,16],style:{marginTop:"10px"}},{default:d(()=>[(o(!0),O(F,null,z(g.value,(M,H)=>(o(),f(a,{key:`psn_${H}`,xs:12,sm:12,md:12,lg:12,xl:12,xxl:8},{default:d(()=>[u(s,{class:"grid-card",hoverable:""},{default:d(()=>[e("div",Lt,[e("div",Pt,[e("div",At,[e("img",{src:M.avatarUrl,alt:""},null,8,Nt),e("div",{class:N(["block-item-grid-left-icon-status",M.pcOnline||M.glassOnline||M.androidOnline?"online":"outline"])},null,2)])]),e("div",Et,[e("div",Ht,[e("span",null,_(M.name),1)]),e("div",Vt,[e("span",null,_(M.alias),1)])])]),e("div",{class:"grid-card-fixed",onClick:ce=>E(H,M)},[e("img",{src:b(Ve),alt:""},null,8,Rt)],8,Zt)]),_:2},1024)]),_:2},1024))),128))]),_:1})])])]),_:1})}}});const Bt=ee(Gt,[["__scopeId","data-v-abae22c7"]]),Dt={width:"20",height:"20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function jt(Z,m){return o(),O("svg",Dt,m[0]||(m[0]=[e("path",{d:"M6 10c0-.195.08-.381.221-.517l6.525-6.276a.748.748 0 0 1 1.043.01.715.715 0 0 1-.01 1.024L7.792 10l5.987 5.759c.29.28.295.738.01 1.024a.748.748 0 0 1-1.043.01L6.22 10.517A.718.718 0 0 1 6 10Z",fill:"#272636"},null,-1)]))}const Ft={render:jt},zt={class:"concat-container"},Jt={class:"concat-top"},qt={class:"concat-top-right"},Qt={class:"concat-desc"},Kt={class:"concat-desc-r"},Xt={class:"concat-main wsl-scroll"},Wt={class:"block-item-grid"},Yt={class:"block-item-grid-left"},es={class:"block-item-grid-left-icon"},ts=["src"],ss={class:"block-item-grid-right"},ns={class:"block-item-grid-right-top"},os={class:"block-item-grid-right-bot"},as={class:"grid-card-fixed"},ls=te({__name:"concat",emits:["handleChangePage"],setup(Z,{emit:m}){const t=m,{t:x}=X.exports.useI18n(),i=W(),T=Y(),C=w(i.memberList),v=w([]),p=w({condition:""}),I=w(!1),g=h=>v.value.some(k=>k.userId===h),S=h=>{const k=v.value.findIndex(n=>n.userId===h.userId);k===-1?v.value.push(h):v.value.splice(k,1)},G=()=>{if(!p.value.condition)return i.memberList;const h=p.value.condition.toLowerCase();return i.memberList.filter(k=>k.name.toLowerCase().includes(h))},R=async()=>{C.value=G()},B=()=>{I.value?(I.value=!1,v.value=[]):(I.value=!0,v.value=q(C.value))},A=async()=>{try{const h=await T.batchExport({ids:D(v.value,"userId")});Pe(h,`${x("meeting.member.left.btn.concat.export.name")}.zip`,"application/zip")}catch{V.error(x("meeting.member.left.btn.concat.export.msg1"))}},E=()=>{t("handleChangePage",0)};return(h,k)=>{const n=me,$=ne,l=le,r=oe,L=ae,s=_e,a=pe;return o(),f(L,{class:"general-card concat-panel",bordered:!1,"body-style":{width:"100%",height:"100%",display:"flex",padding:0,flexFlow:"column"}},{default:d(()=>[e("div",zt,[e("div",Jt,[e("div",{class:"concat-top-left",onClick:E},[u(b(Ft)),e("span",null,_(h.$t("meeting.member.left.btn.concat.qr")),1)]),e("div",qt,[u(l,null,{default:d(()=>[u(n,{modelValue:p.value.condition,"onUpdate:modelValue":k[0]||(k[0]=c=>p.value.condition=c),style:{width:"100%"},placeholder:h.$t("meeting.member.tabs.search"),onInput:R},null,8,["modelValue","placeholder"]),u($,{type:"primary",class:"btn-item",disabled:!(v.value.length>0),onClick:A},{default:d(()=>[j(_(h.$t("meeting.member.left.btn.concat.export")),1)]),_:1},8,["disabled"])]),_:1})])]),u(r,{margin:0}),e("div",Qt,[e("div",{class:"concat-desc-l",onClick:B},[I.value?(o(),f(b(Q),{key:0})):(o(),f(b(K),{key:1}))]),e("div",Kt,[e("span",null,_(b(x)("meeting.member.left.btn.concat.all")),1)])]),e("div",Xt,[u(a,{gutter:[16,16],style:{marginTop:"10px"}},{default:d(()=>[(o(!0),O(F,null,z(C.value,(c,M)=>(o(),f(s,{key:`psn_${M}`,xs:24,sm:12,md:8,lg:8,xl:6,xxl:6,onClick:H=>S(c)},{default:d(()=>[u(L,{class:"grid-card",hoverable:""},{default:d(()=>[e("div",Wt,[e("div",Yt,[e("div",es,[e("img",{src:c.avatarUrl,alt:""},null,8,ts),e("div",{class:N(["block-item-grid-left-icon-status",c.pcOnline||c.glassOnline||c.androidOnline?"online":"outline"])},null,2)])]),e("div",ss,[e("div",ns,[e("span",null,_(c.name),1)]),e("div",os,[e("span",null,_(c.alias),1)])])]),e("div",as,[g(c.userId)?(o(),f(b(Q),{key:0})):(o(),f(b(K),{key:1}))])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})])])]),_:1})}}});const cs=ee(ls,[["__scopeId","data-v-14a70690"]]),is={class:"container"},rs={key:0,class:"layout"},ds={class:"layout-left-side"},us={class:"layout-content"},ms={key:1,class:"layout-concat"},_s=te({__name:"index",setup(Z){const m=W(),t=Ce(),x=$e(),i=Y(),T=ke(),{t:C}=X.exports.useI18n(),v=w(!1),p=w(0),I=()=>{const l=m.selectPsn.filter(r=>r.userId!==i.userId);t.updateSchedulePsn(q(l)),v.value=!0},g=()=>{t.updateSchedulePsn([]),v.value=!1},S=w(!1),G=()=>{S.value=!0},R=()=>{S.value=!1},B=l=>{R(),t.updateSchedulePsn(l)},A=w(!1),E=()=>{t.updateRoomOptions(null),t.updateRoomInvitePsn(null),A.value=!1},h=l=>{if(t.answerInfo&&t.answerInfo.meetingNo){V.error(C("meeting.call.message.tips"));return}A.value=!0,t.updateRoomInvitePsn(l),t.updateRoomOptions({meetingName:`${i.name} ${C("meeting.room.option.meetingName")}`,video:!1,audio:!0,loudspeaker:!0,cloudRecord:!1,abstract:!1,escaping:!1,organizer:i.name})},k=async l=>{var r,L,s,a;try{console.log("Address-handleJoinAssist",t,t.ThImEvent,l);const c=await t.ThImEvent.joinMeeting({meetingNo:l.meetingNo,forceEntryStatus:0,inviters:D(t.roomInvitePsn,"userId")});if(x.updateRoomTranslateInfo({...x.roomTranslateInfo,...c.data,open:!!((r=c.data)!=null&&r.enableTranslation)}),T.updateBtnLoading(!1),c.code!==200&&c.code!==401){c.code===ie.OTHER_CLIENT_JOINED_MEETING||c.code===ie.OTHER_CLIENT_IN_MEETING?(t.updateForceEntryMeetingInfo({meetingNo:l.meetingNo,invitor:D(t.roomInvitePsn,"userId")}),Me.emit("Chat-Other-Client-Joined-Meeting")):V.error(c.msg);return}t.ThImEvent.roomMenuOptions={video:(L=t.roomOptions)==null?void 0:L.video,audio:(s=t.roomOptions)==null?void 0:s.audio,loudspeaker:(a=t.roomOptions)==null?void 0:a.loudspeaker},t.ThImEvent.setRoomOnlineListPsn(m.memberList),t.ThImEvent.setRoomOnlineGroupPsn(m.memberGroupList),console.log("address--join-----",t.roomInvitePsn),t.ThImEvent.updateInvitingList(t.roomInvitePsn,"add"),E(),t.updateAssistVisible(!0)}catch{T.updateBtnLoading(!1)}},n=async()=>{var l,r,L,s,a,c,M;try{const H=await t.createRealtimeMeeting({aiStatus:(l=t.roomOptions)!=null&&l.abstract?"1":"0",recordStatus:(r=t.roomOptions)!=null&&r.cloudRecord?"1":"0",escaping:(L=t.roomOptions)!=null&&L.escaping?"1":"0",subject:(s=t.roomOptions)==null?void 0:s.meetingName,userIds:D(t.roomInvitePsn,"userId"),enableTranslation:(a=t.roomOptions)!=null&&a.escaping?"1":"0",languageType:(c=x.roomTranslateInfo)==null?void 0:c.languageType,industryType:(M=x.roomTranslateInfo)==null?void 0:M.industryType});if(H.code!==200&&H.code!==401){V.error(H.msg),T.updateBtnLoading(!1);return}k(H.data)}catch{T.updateBtnLoading(!1)}},$=l=>{p.value=l};return(l,r)=>{const L=le,s=Le;return o(),O("div",is,[p.value===0?(o(),O("div",rs,[e("div",ds,[p.value===0?(o(),f(gt,{key:0,onHandleOptionCallOpen:h,onHandleChangePage:$})):U("",!0)]),e("div",us,[u(L,{size:16,direction:"vertical",fill:""},{default:d(()=>[p.value===0?(o(),f(Bt,{key:0,onHandleScheduleOpen:I,onHandleOptionCallOpen:h})):U("",!0)]),_:1})])])):U("",!0),p.value===1?(o(),O("div",ms,[p.value===1?(o(),f(cs,{key:0,onHandleChangePage:$})):U("",!0)])):U("",!0),v.value?(o(),f(s,{key:2,visible:v.value,"onUpdate:visible":r[0]||(r[0]=a=>v.value=a),footer:!1,closable:!1,class:"customModal"},{default:d(()=>[u(Ae,{onHandleClose:g,onHandleInviteOpen:G})]),_:1},8,["visible"])):U("",!0),S.value?(o(),f(s,{key:3,visible:S.value,"onUpdate:visible":r[1]||(r[1]=a=>S.value=a),footer:!1,closable:!1,class:"customModal"},{default:d(()=>[u(Ee,{"select-psn":b(t).schedulePsn,onHandleClose:R,onHandleInvite:B},null,8,["select-psn"])]),_:1},8,["visible"])):U("",!0),A.value?(o(),f(s,{key:4,visible:A.value,"onUpdate:visible":r[2]||(r[2]=a=>A.value=a),footer:!1,closable:!1,class:"customModal"},{default:d(()=>[u(He,{onHandleCall:n,onHandleClose:E})]),_:1},8,["visible"])):U("",!0)])}}});const Ms=ee(_s,[["__scopeId","data-v-5ef3be9a"]]);export{Ms as default};
