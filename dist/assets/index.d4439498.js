import{ab as G,at as q,_ as J,d as Y,ac as X,v as ee,q as de,g as ce,ad as re,u as ue,E as Z,ai as Q}from"./index.ae3ddf81.js";/* empty css               */import{d as W,j as x,o as te,b as se,C as c,aE as R,aH as r,E as e,aN as a,aI as l,u as v,ac as me,D as g,aK as F,aJ as V,F as H,aF as U,b4 as _e,bG as K,b8 as ne,bK as oe,aW as B,w as ge,aM as T,by as pe,b7 as ve,aX as he,bR as be,bL as fe,bM as ye,bS as ke,bd as Ce}from"./arco.22dd370d.js";import{g as P,u as Ae,w as Oe,p as j}from"./icon_volume_1.fd08a673.js";import{o as Me}from"./index.81f9d35b.js";import{M as ae}from"./icon-default-meeting.2b7c3ed3.js";/* empty css               */import"./chart.93614b3d.js";import"./vue.141c3422.js";const xe="/assist/assets/no_meeting.568a47cc.png",Ie={class:"record-panel-top"},we={class:"search-container"},$e=["onClick"],Te={class:"record-panel-content-item-left"},Se={class:"record-panel-content-item-right",fill:""},Ne={class:"record-panel-content-item-right-top"},Ee={class:"record-panel-content-item-right-top-name textEllipsis"},De={class:"record-panel-content-item-right-top-time"},Re={class:"record-panel-content-item-right-bot"},Le={key:0,class:"loading-spinner"},ze={key:1,class:"no-data"},Be={class:"no-data-body"},Fe=["src"],Ve={class:"no-data-body-text"},Ue=W({__name:"record",setup(S,{expose:p}){const L=G(),n=q(),h=x([]),y=x(0),d=x({pageSize:20,pageNo:1,keywords:""}),b=x(!1),k=x(!0),s=async()=>{if(console.log("\u5F00\u59CB\u52A0\u8F7D\u6570\u636E:",{isMore:k.value,loading:b.value,pageNo:d.value.pageNo}),!!k.value&&!b.value)try{const t=await L.getMeetingRecordList({pageNo:d.value.pageNo,pageSize:d.value.pageSize,keywords:d.value.keywords});if(t.code!==200&&t.code!==401){B.error(t.msg);return}d.value.pageNo===1?h.value=t.data.data:h.value=[...h.value,...t.data.data],y.value=t.data.total;const o=d.value.pageNo;k.value=o*d.value.pageSize<y.value,console.log("\u5206\u9875\u4FE1\u606F:",{currentPage:o,pageSize:d.value.pageSize,total:y.value,isMore:k.value,calculated:o*d.value.pageSize}),d.value.pageNo+=1}catch(t){console.error("Failed to load meetings",t)}finally{b.value=!1,console.log(k.value),y.value>0?n.updateNoRecord(!0):n.updateNoRecord(!1)}},$=()=>{h.value=[],y.value=0,d.value.pageNo=1,k.value=!0,s()},N=t=>{n.updateCurMeeting(t)},E=()=>{d.value.pageNo=1,h.value=[],y.value=0,k.value=!0,s()},I=x();let M=null;const D=()=>{console.log("\u6EDA\u52A8\u68C0\u67E5:",{isMore:k.value,loading:b.value,hasContainer:!!I.value}),!(!I.value||!k.value||b.value)&&(M&&clearTimeout(M),M=window.setTimeout(()=>{const{scrollTop:t,scrollHeight:o,clientHeight:i}=I.value;o-t-i<100&&s()},200))};return te(async()=>{$()}),se(()=>{M&&(clearTimeout(M),M=null)}),p({meetingList:h,handleInitMeetingList:$}),(t,o)=>{const i=_e,f=K,A=ne,C=oe;return c(),R(C,{class:"general-card record-panel",bordered:!1,"body-style":{height:"100%",display:"flex",padding:0,flexFlow:"column"}},{default:r(()=>[e("div",Ie,[e("span",null,a(t.$t("meeting.record.title")),1),e("div",we,[l(i,{modelValue:d.value.keywords,"onUpdate:modelValue":o[0]||(o[0]=u=>d.value.keywords=u),placeholder:t.$t("meeting.record.search.placeholder"),"allow-clear":"",onChange:E,onClear:E},{prefix:r(()=>[l(v(me))]),_:1},8,["modelValue","placeholder"])])]),l(f,{margin:0}),v(n).noRecord?(c(),g("div",{key:0,ref_key:"scrollContainer",ref:I,class:"record-panel-content wsl-scroll",onScroll:D},[(c(!0),g(F,null,V(h.value,(u,m)=>{var O;return c(),g("div",{key:m,class:H(["record-panel-content-item",((O=v(n).curMeeting)==null?void 0:O.meetingId)===u.meetingId?"active":""]),onClick:w=>N(u)},[e("div",Te,[l(v(ae))]),e("div",Se,[e("div",Ne,[l(A,{content:u.subject},{default:r(()=>[e("div",Ee,a(u.subject),1)]),_:2},1032,["content"]),e("div",De,a(v(P)(u.startTime,"today")),1)]),e("div",Re,a(t.$t("meeting.list.meeting.time"))+" "+a(v(Ae)(u.startTime,u.endTime)),1)])],10,$e)}),128)),b.value?(c(),g("div",Le,a(t.$t("meeting.list.loading")),1)):U("",!0)],544)):(c(),g("div",ze,[e("div",Be,[e("img",{src:v(xe),alt:""},null,8,Fe),e("div",Ve,a(t.$t("meeting.no.data.text")),1)])]))]),_:1})}}});const Ze=J(Ue,[["__scopeId","data-v-81178937"]]);const je="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAUpJREFUOE+lkzEohVEcxX9nMxqVRUmRAVEWg4EyGF5RBslgYDAYGcyUWaaXFPXEYKAMZDFYDJLBINmMRsOr417d7/U9T+978i33Lud3z/+c/yf++alVve1BYBj4BC4kfURtU0ASzQEloA24AtqBEWAoQhoAtnuBxZzoFKhIus/c2j4BziQd1QBJuAd0AQ2i/Ki294FbSeVvgO0O4DHMtw4cSKo2y8b2KzAl6TkDLAHjkhZ+Cm3Px7kl7abHRoHDYL+nFqLt7kC8A1YlHedmnQnhbQe7E5LeEmALqErarGshBNMfySnleL4Da3lxAkT7JUkPv9ZoO1qMta0As5Kuc47q7DfdA9s7yepGDlBnvwgQt64C9MVWbMdFivZjHk8ZtGgTb1LiZdvLaaTJfFNFgIG0vuex93AfC1W/tAxIqXcC08BlVuWfAEV/6xeBLYURySeBPwAAAABJRU5ErkJggg==",He="/assist/assets/no_meeting.568a47cc.png",Pe={width:"48",height:"48",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Ge(S,p){return c(),g("svg",Pe,p[0]||(p[0]=[e("g",{fill:"#15C0E6"},[e("path",{d:"m5.162 38.02-.04.04c-.54-1.18-.88-2.52-1.02-4 .14 1.46.52 2.78 1.06 3.96ZM17.998 20.76a4.76 4.76 0 1 0 0-9.52 4.76 4.76 0 0 0 0 9.52Z"}),e("path",{d:"M32.38 4H15.62C8.34 4 4 8.34 4 15.62v16.76c0 2.18.38 4.08 1.12 5.68 1.72 3.8 5.4 5.94 10.5 5.94h16.76C39.66 44 44 39.66 44 32.38V15.62C44 8.34 39.66 4 32.38 4Zm8.36 21c-1.56-1.34-4.08-1.34-5.64 0l-8.32 7.14c-1.56 1.34-4.08 1.34-5.64 0l-.68-.56c-1.42-1.24-3.68-1.36-5.28-.28L7.7 36.32C7.26 35.2 7 33.9 7 32.38V15.62C7 9.98 9.98 7 15.62 7h16.76C38.02 7 41 9.98 41 15.62v9.6l-.26-.22Z"})],-1)]))}const qe={render:Ge},Je={width:"48",height:"48",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function We(S,p){return c(),g("svg",Je,p[0]||(p[0]=[e("g",{fill:"#FDC748"},[e("path",{d:"M38.923 8.155c.24.389-.18.835-.624.728a7.71 7.71 0 0 0-.1-.023c-.94-.28-1.98-.42-3.04-.42h-6.85a.5.5 0 0 1-.4-.2l-2.45-3.26a9.364 9.364 0 0 0-.087-.123c-.254-.347-.02-.857.41-.857h5.658a8.793 8.793 0 0 1 7.483 4.155Z"}),e("path",{d:"M40.28 13.08a8.36 8.36 0 0 0-2.9-1.34c-.72-.2-1.46-.3-2.22-.3h-7.44c-1.16 0-1.24-.1-1.86-.92l-2.8-3.72C21.76 5.06 20.74 4 17.48 4h-4.64C7.96 4 4 7.96 4 12.84v22.32C4 40.04 7.96 44 12.84 44h22.32c4.88 0 8.84-3.96 8.84-8.84V20.28c0-2.98-1.46-5.6-3.72-7.2Zm-11.5 19.6H19.2c-.78 0-1.38-.62-1.38-1.4 0-.76.6-1.4 1.38-1.4h9.58c.78 0 1.4.64 1.4 1.4 0 .78-.62 1.4-1.4 1.4Z"})],-1)]))}const Ke={render:We},Qe={width:"48",height:"48",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Ye(S,p){return c(),g("svg",Qe,p[0]||(p[0]=[e("path",{d:"M42.3 12.34c-.82-.44-2.54-.9-4.88.74l-2.94 2.08C34.26 8.94 31.56 6.5 25 6.5H13c-6.84 0-9.5 2.66-9.5 9.5v16c0 4.6 2.5 9.5 9.5 9.5h12c6.56 0 9.26-2.44 9.48-8.66l2.94 2.08c1.24.88 2.32 1.16 3.18 1.16.74 0 1.32-.22 1.7-.42.82-.42 2.2-1.56 2.2-4.42V16.76c0-2.86-1.38-4-2.2-4.42ZM22 22.76c-2.06 0-3.76-1.68-3.76-3.76s1.7-3.76 3.76-3.76c2.06 0 3.76 1.68 3.76 3.76s-1.7 3.76-3.76 3.76Z",fill:"#6D5DD3"},null,-1)]))}const Xe={render:Ye},et={width:"48",height:"48",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function tt(S,p){return c(),g("svg",et,p[0]||(p[0]=[e("g",{fill:"#4890FD"},[e("path",{d:"M37.5 27.8h-3.996a1 1 0 0 0-.556.169L28.18 31.16c-.72.48-1.56.7-2.38.7-.7 0-1.4-.16-2.04-.52-1.18-.624-1.978-1.889-2.198-3.217-.073-.437-.355-.825-.768-.982a8.877 8.877 0 0 1-3.134-2.001C15.94 23.42 15 21 15 18.3V9a1 1 0 0 0-1-1h-1c-5.4 0-9 2.7-9 9v10.8c0 6.3 3.6 9 9 9h7.5v5.7h-5.7c-.82 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5h14.4c.82 0 1.5-.68 1.5-1.5s-.68-1.5-1.5-1.5h-5.7v-5.7H31c5.105 0 8.601-2.413 8.968-7.999.036-.55-.416-1.001-.968-1.001h-1.5Z"}),e("path",{d:"M37.5 4h-13c-2.98 0-5.22 1.52-6.1 4-.26.76-.4 1.6-.4 2.5v7.8c0 1.94.64 3.58 1.78 4.72 1.14 1.14 2.78 1.78 4.72 1.78v2.78c0 1.02 1.16 1.64 2.02 1.08l5.78-3.86h5.2c.9 0 1.74-.14 2.5-.4 2.48-.88 4-3.12 4-6.1v-7.8C44 6.6 41.4 4 37.5 4ZM25.24 16c-.84 0-1.5-.68-1.5-1.5s.66-1.5 1.5-1.5 1.5.68 1.5 1.5-.66 1.5-1.5 1.5Zm5.64 0c-.84 0-1.5-.68-1.5-1.5s.68-1.5 1.5-1.5 1.5.68 1.5 1.5-.68 1.5-1.5 1.5Zm5.62 0c-.84 0-1.5-.68-1.5-1.5s.68-1.5 1.5-1.5 1.5.68 1.5 1.5-.68 1.5-1.5 1.5Z"}),e("path",{d:"M44 10.5v7.8c0 2.98-1.52 5.22-4 6.1-.76.26-1.6.4-2.5.4h-5.2l-5.78 3.86c-.86.56-2.02-.06-2.02-1.08V24.8c-1.94 0-3.58-.64-4.72-1.78C18.64 21.88 18 20.24 18 18.3v-7.8c0-.9.14-1.74.4-2.5.88-2.48 3.12-4 6.1-4h13c3.9 0 6.5 2.6 6.5 6.5Z"})],-1)]))}const st={render:tt},nt={key:0,class:"detail-panel"},ot={class:"detail-panel-top"},at={class:"detail-panel-top-title"},it={class:"detail-panel-top-title-left"},lt={class:"detail-panel-top-title-right"},dt={class:"meeting-title"},ct={class:"meeting-number"},rt={class:"detail-panel-top-btn"},ut=["src"],mt={class:"detail-panel-main wsl-scroll"},_t={class:"block-item-grid"},gt={class:"block-item-grid-top"},pt={class:"block-item-grid-bot"},vt={class:"block-item-grid-bot-icon"},ht=["src"],bt={class:"block-item-grid-bot-l"},ft={class:"block-item-grid"},yt={class:"block-item-grid-top"},kt={class:"block-item-grid-bot"},Ct={class:"block-item-grid-bot-l"},At={class:"block-item-grid"},Ot={class:"block-item-grid-top"},Mt={class:"block-item-grid-bot"},xt={class:"block-item-grid-bot-l"},It={class:"block-item-grid"},wt={class:"block-item-grid-top"},$t={class:"block-item-grid-bot"},Tt={class:"block-item-grid-bot-l"},St={class:"block-member"},Nt={class:"block-member-item"},Et={class:"block-member-item-title"},Dt={class:"block-member-item-main"},Rt={class:"block-member-item-main-i-t"},Lt=["src"],zt={class:"block-member-item-main-i-n"},Bt={class:"block-member-item",style:{"margin-top":"10px"}},Ft={class:"block-member-item-title"},Vt={key:0,class:"block-member-item-main"},Ut={class:"block-member-item-main-i-t"},Zt=["src"],jt={class:"block-member-item-main-i-n"},Ht={class:"grid-card-data-main"},Pt={class:"grid-card-data-main-top"},Gt={class:"grid-card-data-main-top-left"},qt={class:"grid-card-data-main-top-right"},Jt={key:0,class:"grid-card-data-main-top-right-num"},Wt={class:"grid-card-data-main-bot"},Kt={class:"grid-card-data-main-bot-top"},Qt={class:"grid-card-data-main-bot-bot"},Yt={class:"grid-card-data-main-bot-bot-left"},Xt={class:"grid-card-data-main-bot-bot-right"},es={key:1},ts={key:1,class:"no-data"},ss={class:"no-data-body"},ns=["src"],os={class:"no-data-body-text"},as=W({__name:"detail",emits:["handleSendAssist"],setup(S,{emit:p}){const L=p,n=q(),h=Y(),y=X(),{t:d,locale:b}=ee.exports.useI18n(),k=G(),s=x({subject:"",meetingId:"",meetingNo:"",masterAvatarUrl:"",masterName:"",meetingDuration:0,startTime:null,endTime:null,inviteMembers:[],members:[],summaryCount:0,cloudVideoCount:0,screenshotCount:0,attachmentCount:0,manualRecordCount:0,chatMessageCount:0}),$=x(),N=()=>{$.value=[{type:3,icon:qe,title:d("meeting.detail.assist.zl.hyzt"),desc:d("meeting.detail.assist.zl.hyzt.en"),hasData:s.value.screenshotCount>0,showNum:!0,num:s.value.screenshotCount,btn:["preview"],url:"capture"},{type:4,icon:Ke,title:d("meeting.detail.assist.zl.hywj"),desc:d("meeting.detail.assist.zl.hywj.en"),hasData:s.value.attachmentCount>0,showNum:!0,num:s.value.attachmentCount,btn:["preview"],url:"file"},{type:5,icon:Xe,title:d("meeting.detail.assist.zl.sdlx"),desc:d("meeting.detail.assist.zl.sdlx.en"),hasData:s.value.manualRecordCount>0,showNum:!0,num:s.value.manualRecordCount,btn:["preview"],url:"picture_recording"},{type:6,icon:st,title:d("meeting.detail.assist.zl.hyxx"),desc:d("meeting.detail.assist.zl.hyxx.en"),hasData:s.value.chatMessageCount>0,showNum:!1,btn:["look"],url:"message"}]},E=(t,o)=>{var i;o.preventDefault(),window.open(`${(i=h.platformConfig)==null?void 0:i.meetingDetailUrl}/AssistV3/meetingWH/views/${t.url}/index_pc.html?userClient=${de.PC}&lang=${b.value}&meetingId=${s.value.meetingId}&token=${ce()}`,"_blank")},I=()=>{s.value.members&&(s.value.members.forEach(t=>{const o=y.memberList.find(i=>i.userId===t.userId);o&&(t.pcOnline=o.pcOnline,t.androidOnline=o.androidOnline,t.glassOnline=o.glassOnline)}),s.value.members.sort((t,o)=>{const i=t.pcOnline||t.androidOnline||t.glassOnline?1:0;return(o.pcOnline||o.androidOnline||o.glassOnline?1:0)-i})),s.value.inviteMembers&&(s.value.inviteMembers.forEach(t=>{const o=y.memberList.find(i=>i.userId===t.userId);o&&(t.pcOnline=o.pcOnline,t.androidOnline=o.androidOnline,t.glassOnline=o.glassOnline)}),s.value.inviteMembers.sort((t,o)=>{const i=t.pcOnline||t.androidOnline||t.glassOnline?1:0;return(o.pcOnline||o.androidOnline||o.glassOnline?1:0)-i}))},M=async()=>{var o;const t=await k.getMeetingRecordDetail({meetingId:(o=n.curMeeting)==null?void 0:o.meetingId});if(t.code!==200&&t.code!==401){B.error(t.msg),n.updateNoRecordDetail(!1);return}s.value=t.data,n.updateNoRecordDetail(!0),N(),I()},D=()=>{L("handleSendAssist",s.value)};return ge(()=>[b,n.curMeeting,y.memberList],t=>{t[0]&&N(),t[1]&&M(),t[2]&&I()},{deep:!0}),(t,o)=>{const i=ne,f=ve,A=he,C=K,u=be,m=oe,O=fe,w=ye,ie=ke;return c(),R(m,{class:"record-detail-container",bordered:!1,"body-style":{padding:0,height:"100%"}},{default:r(()=>[v(n).noRecordDetail?(c(),g("div",nt,[e("div",ot,[e("div",at,[l(f,{size:16},{default:r(()=>[e("div",it,[l(v(ae))]),l(i,{content:s.value.subject},{default:r(()=>[e("div",lt,[e("div",dt,a(s.value.subject),1),e("div",ct,"\u4F1A\u8BAE\u53F7\uFF1A"+a(s.value.meetingNo),1)])]),_:1},8,["content"])]),_:1})]),e("div",rt,[l(A,{type:"primary",onClick:D},{icon:r(()=>[e("img",{src:v(je),alt:""},null,8,ut)]),default:r(()=>[T(a(t.$t("meeting.btn.send")),1)]),_:1})])]),l(C,{margin:0}),e("div",mt,[l(u,{class:"block-title",heading:6,style:{margin:0,fontWeight:400}},{default:r(()=>[T(a(t.$t("meeting.detail.assist.title")),1)]),_:1}),l(w,{gutter:[20,20],style:{marginTop:"10px"}},{default:r(()=>[l(O,{xs:12,sm:12,md:12,lg:12,xl:12,xxl:6},{default:r(()=>[l(m,{class:"grid-card",bordered:!1,hoverable:""},{default:r(()=>[e("div",_t,[e("div",gt,[e("span",null,a(t.$t("meeting.detail.assist.fqr")),1)]),e("div",pt,[e("div",vt,[e("img",{src:s.value.masterAvatarUrl,alt:""},null,8,ht)]),e("div",bt,a(s.value.masterName),1)])])]),_:1})]),_:1}),l(O,{xs:12,sm:12,md:12,lg:12,xl:12,xxl:6},{default:r(()=>[l(m,{class:"grid-card",bordered:!1,hoverable:""},{default:r(()=>[e("div",ft,[e("div",yt,[e("span",null,a(t.$t("meeting.detail.assist.hysc")),1)]),e("div",kt,[e("div",Ct,a(v(Oe)(s.value.meetingDuration)),1)])])]),_:1})]),_:1}),l(O,{xs:12,sm:12,md:12,lg:12,xl:12,xxl:6},{default:r(()=>[l(m,{class:"grid-card",bordered:!1,hoverable:""},{default:r(()=>[e("div",At,[e("div",Ot,[e("span",null,a(t.$t("meeting.detail.assist.start.time")),1)]),e("div",Mt,[e("div",xt,a(s.value.startTime?v(P)(s.value.startTime,"today"):""),1)])])]),_:1})]),_:1}),l(O,{xs:12,sm:12,md:12,lg:12,xl:12,xxl:6},{default:r(()=>[l(m,{class:"grid-card",bordered:!1,hoverable:""},{default:r(()=>[e("div",It,[e("div",wt,[e("span",null,a(t.$t("meeting.detail.assist.end.time")),1)]),e("div",$t,[e("div",Tt,a(s.value.endTime?v(P)(s.value.endTime,"today"):""),1)])])]),_:1})]),_:1})]),_:1}),l(u,{class:"block-title",heading:6,style:{margin:"20px 0 10px",fontWeight:400}},{default:r(()=>[T(a(t.$t("meeting.detail.meeting.member")),1)]),_:1}),e("div",St,[e("div",Nt,[e("div",Et,[e("span",null,a(t.$t("meeting.detail.meeting.member.yq")),1),o[0]||(o[0]=T(" \xA0\xA0 ")),e("span",null,"("+a(s.value.inviteMembers.length)+" "+a(t.$t("meeting.detail.meeting.member.dw"))+")",1)]),e("div",Dt,[(c(!0),g(F,null,V(s.value.inviteMembers,(_,z)=>(c(),g("div",{key:`yq_${z}`,class:"block-member-item-main-i"},[e("div",Rt,[e("img",{src:_.avatarUrl,alt:""},null,8,Lt),e("div",{class:H([_.pcOnline||_.androidOnline||_.glassOnline?"online":"outline","block-member-item-main-i-t-f"])},null,2)]),e("div",zt,[e("span",null,a(_.name),1)])]))),128))])]),l(C,{margin:5}),e("div",Bt,[e("div",Ft,[e("span",null,a(t.$t("meeting.detail.meeting.member.sj")),1),o[1]||(o[1]=T(" \xA0\xA0 ")),e("span",null,"("+a(s.value.members.length)+" "+a(t.$t("meeting.detail.meeting.member.dw"))+")",1)]),s.value.members?(c(),g("div",Vt,[(c(!0),g(F,null,V(s.value.members,(_,z)=>(c(),g("div",{key:`sj_${z}`,class:"block-member-item-main-i"},[e("div",Ut,[e("img",{src:_.avatarUrl,alt:""},null,8,Zt),e("div",{class:H([_.pcOnline||_.androidOnline||_.glassOnline?"online":"outline","block-member-item-main-i-t-f"])},null,2)]),e("div",jt,[e("span",null,a(_.name),1)])]))),128))])):U("",!0)])]),l(u,{class:"block-title",heading:6,style:{margin:"20px 0 10px",fontWeight:400}},{default:r(()=>[T(a(t.$t("meeting.detail.assist.zl")),1)]),_:1}),l(w,{gutter:[16,16],style:{marginTop:"10px"}},{default:r(()=>[(c(!0),g(F,null,V($.value,(_,z)=>(c(),R(O,{key:`data_${z}`,xs:24,sm:24,md:24,lg:12,xl:12,xxl:8},{default:r(()=>[l(m,{class:"grid-card-data",bordered:!0,hoverable:""},{default:r(()=>[e("div",Ht,[e("div",Pt,[e("div",Gt,[(c(),R(pe(_.icon),{class:"icon"}))]),e("div",qt,[_.hasData&&_.showNum?(c(),g("div",Jt,[e("span",null,a(_.num)+" "+a(v(d)("meeting.detail.assist.zl.dw")),1)])):U("",!0)])]),e("div",Wt,[e("div",Kt,[e("span",null,a(_.title),1)]),e("div",Qt,[e("div",Yt,[e("span",null,a(_.desc),1)]),e("div",Xt,[_.hasData?(c(),R(ie,{key:0,href:"/",onClick:le=>E(_,le)},{default:r(()=>[T(a(v(d)("meeting.detail.assist.zl.btn.look")),1)]),_:2},1032,["onClick"])):(c(),g("span",es,a(t.$t("meeting.detail.assist.zl.zwlr")),1))])])])])]),_:2},1024)]),_:2},1024))),128))]),_:1})])])):(c(),g("div",ts,[e("div",ss,[e("img",{src:v(He),alt:""},null,8,ns),e("div",os,a(t.$t("meeting.no.data.text")),1)])]))]),_:1})}}});const is=J(as,[["__scopeId","data-v-6164d189"]]),ls={class:"container"},ds={class:"layout"},cs={class:"layout-left-side"},rs={class:"layout-content"},us=W({__name:"index",setup(S){const{t:p}=ee.exports.useI18n(),L=q(),n=G(),h=re(),y=X(),d=ue(),b=Y(),k=x(),s=x(!1),$=()=>{n.updateRoomOptions(null),n.updateRoomInvitePsn(null),s.value=!1},N=i=>{if(n.answerInfo&&n.answerInfo.meetingNo){B.error(p("meeting.call.message.tips"));return}s.value=!0,n.updateRoomInvitePsn(i.inviteMembers),n.updateRoomOptions({meetingName:i.subject,video:!1,audio:!0,loudspeaker:!0,cloudRecord:i.recordStatus===1,abstract:i.aiStatus===1,escaping:i.escaping===1,organizer:d.name})},E=async i=>{var f,A,C,u;try{const m=await n.ThImEvent.joinMeeting({meetingNo:i.meetingNo,forceEntryStatus:0,inviters:n.roomInvitePsn?j(n.roomInvitePsn,"userId"):[]});if(h.updateRoomTranslateInfo({...h.roomTranslateInfo,...m.data,open:!!((f=m.data)!=null&&f.enableTranslation)}),b.updateBtnLoading(!1),m.code!==200&&m.code!==401){m.code===Q.OTHER_CLIENT_JOINED_MEETING||m.code===Q.OTHER_CLIENT_IN_MEETING?(n.updateForceEntryMeetingInfo({meetingNo:i.meetingNo,invitor:n.roomInvitePsn?j(n.roomInvitePsn,"userId"):[]}),Z.emit("Chat-Other-Client-Joined-Meeting")):B.error(m.msg);return}n.ThImEvent.roomMenuOptions={video:(A=n.roomOptions)==null?void 0:A.video,audio:(C=n.roomOptions)==null?void 0:C.audio,loudspeaker:(u=n.roomOptions)==null?void 0:u.loudspeaker},n.ThImEvent.setRoomOnlineListPsn(y.memberList),n.ThImEvent.setRoomOnlineGroupPsn(y.memberGroupList),$(),n.updateAssistVisible(!0)}catch{b.updateBtnLoading(!1)}},I=async()=>{var i,f,A,C,u,m,O;try{const w=await n.createRealtimeMeeting({aiStatus:(i=n.roomOptions)!=null&&i.abstract?"1":"0",recordStatus:(f=n.roomOptions)!=null&&f.cloudRecord?"1":"0",escaping:(A=n.roomOptions)!=null&&A.escaping?"1":"0",subject:(C=n.roomOptions)==null?void 0:C.meetingName,userIds:n.roomInvitePsn?j(n.roomInvitePsn,"userId"):[],enableTranslation:(u=n.roomOptions)!=null&&u.escaping?"1":"0",languageType:(m=h.roomTranslateInfo)==null?void 0:m.languageType,industryType:(O=h.roomTranslateInfo)==null?void 0:O.industryType});if(w.code!==200&&w.code!==401){b.updateBtnLoading(!1),B.error(w.msg);return}E(w.data)}catch{b.updateBtnLoading(!1)}},M=()=>{L.clearOptions()},D=async()=>{},t=()=>{Z.on("record-list-update",D)},o=()=>{Z.off("record-list-update",D)};return te(()=>{t()}),se(()=>{M(),o()}),(i,f)=>{const A=K,C=Ce;return c(),g("div",ls,[e("div",ds,[e("div",cs,[l(Ze,{ref_key:"recordListRef",ref:k},null,512)]),l(A,{direction:"vertical",style:{margin:0}}),e("div",rs,[l(is,{onHandleSendAssist:N})])]),s.value?(c(),R(C,{key:0,visible:s.value,"onUpdate:visible":f[0]||(f[0]=u=>s.value=u),footer:!1,closable:!1,class:"customModal"},{default:r(()=>[l(Me,{onHandleCall:I,onHandleClose:$})]),_:1},8,["visible"])):U("",!0)])}}});const ks=J(us,[["__scopeId","data-v-abf1677b"]]);export{ks as default};
