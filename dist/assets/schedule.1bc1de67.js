import{ab as ae,ad as te,v as ne,aq as le,_ as oe}from"./index.57db64de.js";/* empty css               */import{d as ie,c as A,j as v,a as de,aS as _,w as ue,o as ce,b as re,C as c,D as r,E as t,u as S,aN as i,aI as l,aH as u,aK as E,aJ as H,aE as me,aF as j,aM as O,aW as p,b5 as ge,bc as pe,bO as he,b9 as ve,b8 as _e,aV as fe,ba as be,bb as ye,bd as De,aX as Ae}from"./arco.638965b6.js";import{c as Se}from"./icon_close.f7fee805.js";import{p as N,g as U}from"./icon_volume_1.148c46df.js";const Te="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAAXNSR0IArs4c6QAAARFJREFUKFOVks9KQlEQxn/jHxD0+gq1bFnQA7i8KV58gEDFRYsWCfYYLdq0aCkEig9gd+m+QJcu6xW8i4SrTszRY0QhNYvD4fD9hm/ON8KutFIpUC5fA5eongA5RGbAE4vFo0wmS5OKHRqGx+Tzz4iY8GepzknTC4njN3Gdg2DqxEEASfId8G8GJcmZaBTdAPdO3O/DaATD4RbqdKBWg2bTN7o14AU43wuiCAYDKBbB330DmInW6ykiub0P62pCKwO/xKC6NOADkcIfgZVZmgKnDmi3odE4ZOnVgB5w9+vQrdbWnh96s+n+/1tdcNXqEdlsfDC49TqU8fjdJe0gC7BUuiKTsdWwmVaIzHer8eBX4xNikoAj5wBd+QAAAABJRU5ErkJggg==",Ie={class:"schedule-options-container modal-container"},ke=["src"],Ve={class:"modal-title"},Ce={class:"modal-main wsl-scroll"},we={class:"users-main"},Ye={class:"users-main-header"},$e={class:"user-main-header-left"},Me={class:"user-main-header-right-icon"},Be={class:"user-main-header-right-label"},Ee={class:"users-main-body"},He={key:0,class:"users-main-body-main"},je={class:"users-main-body-main-item-top"},Oe=["src"],Ne={class:"users-main-body-main-item-bot textEllipsis"},Ue=["onClick"],Fe=["src"],Ke={key:1,class:"users-main-body-no-data"},Pe={class:"bx"},xe={key:0,class:"ax"},Re={class:"label"},ze=["src"],qe={key:1,class:"ax"},Qe={class:"label"},We={class:"des"},Ge={class:"modal-bot"},Je=ie({__name:"schedule",props:{meetingDetail:{}},emits:["handleClose","handleInviteOpen"],setup(F,{emit:K}){const d=ae();te();const{t:h,locale:T}=ne.exports.useI18n(),I=A(()=>{var e;return(e=d.industryList)==null?void 0:e.map(s=>({label:T.value==="zh-CN"?s.value:s.english,value:s.label}))}),k=A(()=>{var e;return(e=d.languageList)==null?void 0:e.map(s=>({...s,label:T.value==="zh-CN"?s.value:s.english,value:s.label,ctry:s.flagUrl}))}),V=K,o=F,a=v({subject:"",userIds:[],startTime:"",endTime:"",recordStatus:"0",aiStatus:"0",escaping:"0",voiceTranslation:!1,languageType:"cn",industryType:"default"});de(()=>{var s;((s=k.value)==null?void 0:s.some(m=>m.type==="aliyun"))&&(a.value.languageType="zh")});const P=A(()=>{const e=_(),s=e.add(30,"minute");return{defaultValue:s.isAfter(e.endOf("day"))?["00:00:00","01:00:00"]:[`${e.format("HH:mm")}:00`,`${s.format("HH:mm:")}:00`],hideDisabledOptions:!0}}),x=e=>e&&_(e).isBefore(_(),"day"),R=e=>{const s=_();return _(e).isSame(s,"day")?{disabledHours:()=>Array.from({length:s.hour()},(m,g)=>g),disabledMinutes:m=>m===s.hour()?Array.from({length:s.minute()},(g,D)=>D):[],disabledSeconds:()=>[]}:{disabledHours:()=>[],disabledMinutes:()=>[],disabledSeconds:()=>[]}},f=v([]),b=v(a.value.recordStatus==="1"),C=v(a.value.aiStatus==="1"),z=v(a.value.escaping==="1"),q=e=>{e&&(a.value.startTime=`${e[0]}:00`,a.value.endTime=`${e[1]}:00`)},w=()=>{if(!o.meetingDetail)a.value.userIds=N(d.schedulePsn,"userId");else{d.updateSchedulePsn(o.meetingDetail.invitees);const e=U(o.meetingDetail.startTime,"YYYY-MM-DD HH:mm"),s=U(o.meetingDetail.endTime,"YYYY-MM-DD HH:mm");f.value=[e,s],console.log("handleInitFormData---",o.meetingDetail,f),a.value={planId:o.meetingDetail.planId,subject:o.meetingDetail.subject,userIds:N(d.schedulePsn,"userId"),startTime:`${e}:00`,endTime:`${s}:00`,recordStatus:o.meetingDetail.recordStatus.toString(),aiStatus:o.meetingDetail.aiStatus.toString(),escaping:o.meetingDetail.escaping.toString(),planType:o.meetingDetail.planType},b.value=o.meetingDetail.recordStatus.toString()==="1",C.value=o.meetingDetail.aiStatus.toString()==="1",z.value=o.meetingDetail.escaping.toString()==="1"}},Y=()=>{a.value={subject:"",userIds:[],startTime:"",endTime:"",recordStatus:"0",aiStatus:"0",escaping:"0"},d.updateSchedulePsn([])},y=()=>{Y(),V("handleClose")},Q=()=>{V("handleInviteOpen")},W=e=>{d.schedulePsn.splice(e,1)},G=async()=>{var e;if(!a.value.subject){p.warning(h("meeting.schedule.form.placeholder.schedule"));return}if(!a.value.startTime){p.warning(h("meeting.schedule.form.placeholder.startDate"));return}if(!a.value.userIds||a.value.userIds.length===0){p.warning(h("meeting.schedule.form.placeholder.member"));return}if(a.value.aiStatus=C.value?"1":"0",a.value.recordStatus=b.value?"1":"0",a.value.escaping=b.value?"1":"0",a.value.planId){const s=await d.updateMeetingPlan(a.value);if(s.code!==200&&s.code!==401){p.error(s.msg);return}p.success(h("meeting.schedule.form.btn.update.schedule"))}else{const s=await d.createScheduleMeeting({...a.value,enableTranslation:(e=a.value)!=null&&e.escaping?"1":"0"});if(s.code!==200&&s.code!==401){p.error(s.msg);return}p.success(h("meeting.schedule.message.success"))}y()};return ue(()=>d.schedulePsn,e=>{e&&w()},{deep:!0}),ce(()=>{w()}),re(()=>{Y()}),(e,s)=>{const m=ge,g=pe,D=he,J=le,L=ve,X=_e,Z=fe,ee=be,$=ye,se=De,M=Ae;return c(),r("div",Ie,[t("div",{class:"modal-fixed",onClick:y},[t("img",{src:S(Se),alt:""},null,8,ke)]),t("div",Ve,i(e.$t("meeting.schedule.modal.title")),1),t("div",Ce,[l(se,{model:a.value,layout:"vertical"},{default:u(()=>[l(g,{field:"subject",label:e.$t("meeting.schedule.form.subject")},{default:u(()=>[l(m,{modelValue:a.value.subject,"onUpdate:modelValue":s[0]||(s[0]=n=>a.value.subject=n),"max-length":255,placeholder:e.$t("meeting.schedule.form.placeholder.schedule")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(g,{field:"startDate",label:e.$t("meeting.schedule.form.startDate")},{default:u(()=>[l(D,{modelValue:f.value,"onUpdate:modelValue":s[1]||(s[1]=n=>f.value=n),class:"schedule-picker-time","show-time":"","time-picker-props":P.value,format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm","disabled-date":x,"disabled-time":R,onOk:q},null,8,["modelValue","time-picker-props"])]),_:1},8,["label"]),t("div",we,[t("div",Ye,[t("div",$e,[t("span",null,i(e.$t("meeting.schedule.form.member")),1)]),t("div",{class:"user-main-header-right",onClick:Q},[t("div",Me,[l(J)]),t("div",Be,[t("span",null,i(e.$t("meeting.schedule.form.btn.add")),1)])])]),t("div",Ee,[a.value.userIds&&a.value.userIds.length>0?(c(),r("div",He,[l(X,{size:10,wrap:""},{default:u(()=>[(c(!0),r(E,null,H(S(d).schedulePsn,(n,B)=>(c(),r("div",{key:`user_${n.userId}_${B}`,class:"users-main-body-main-item"},[t("div",je,[t("img",{src:n.avatarUrl,alt:"avatar"},null,8,Oe)]),l(L,{content:n.name},{default:u(()=>[t("div",Ne,i(n.name),1)]),_:2},1032,["content"]),t("div",{class:"users-main-body-main-item-fixed",onClick:Le=>W(B)},[t("img",{src:S(Te),alt:"del"},null,8,Fe)],8,Ue)]))),128))]),_:1})])):(c(),r("div",Ke,[t("span",null,i(e.$t("meeting.schedule.form.placeholder.member")),1)]))])]),l(g,{style:{"margin-bottom":"0"},"content-class":"schedule-checkbox schedule-checkbox-voice"},{default:u(()=>[t("div",Pe,[t("span",null,i(e.$t("meeting.schedule.form.voiceTranslation")),1),l(Z,{modelValue:a.value.voiceTranslation,"onUpdate:modelValue":s[2]||(s[2]=n=>a.value.voiceTranslation=n),size:"small"},null,8,["modelValue"])]),a.value.voiceTranslation?(c(),r("div",xe,[t("div",Re,i(e.$t("meeting.schedule.form.myLanguage")),1),t("div",null,[l($,{modelValue:a.value.languageType,"onUpdate:modelValue":s[3]||(s[3]=n=>a.value.languageType=n)},{default:u(()=>[(c(!0),r(E,null,H(k.value,n=>(c(),me(ee,{class:"st-img",value:n.value},{default:u(()=>[t("img",{src:n.ctry},null,8,ze),t("span",null,i(n.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])])])):j("",!0),a.value.voiceTranslation&&I.value.length>0?(c(),r("div",qe,[t("div",Qe,i(e.$t("meeting.schedule.form.thesaurus")),1),t("div",null,[l($,{modelValue:a.value.industryType,"onUpdate:modelValue":s[4]||(s[4]=n=>a.value.industryType=n),options:I.value},null,8,["modelValue","options"])]),t("div",We,i(e.$t("meeting.schedule.form.desc")),1)])):j("",!0)]),_:1}),l(g,{"content-class":"schedule-checkbox",field:"recordStatus","hide-label":""})]),_:1},8,["model"])]),t("div",Ge,[l(M,{class:"modal-btn-item",onClick:y},{default:u(()=>[O(i(e.$t("meeting.schedule.form.btn.cancel")),1)]),_:1}),l(M,{class:"modal-btn-item",type:"primary",onClick:G},{default:u(()=>[O(i(e.$t("meeting.schedule.form.btn.schedule")),1)]),_:1})])])}}});const ts=oe(Je,[["__scopeId","data-v-d05d16b5"]]);export{Te as d,ts as s};
