import{d as g,C as f,D as v,E as e,u as h,b0 as A,b1 as M,j as I,aN as m,aI as s,aH as l,aM as L,aW as P,n as j,b6 as z,bd as D,bk as U,aX as R,b9 as q,bl as G,be as W,o as H,G as O}from"./arco.28b3dd34.js";import{_ as b,v as X,u as J,s as K,a as Q,b as Y,c as Z,E as ee,d as oe,i as se}from"./index.722fe009.js";import{u as te,F as ne,l as ae}from"./loading.0b71f471.js";import{f as re,g as le,h as ie}from"./vue.3a8db0d4.js";import"./chart.836649e8.js";/* empty css              */const ce="/assist/assets/banner_bg.3eeb59ed.png",ue=i=>(A("data-v-2840fe52"),i=i(),M(),i),de={class:"banner"},_e=ue(()=>e("div",{class:"banner-inner"},[e("div",{class:"banner-inner-t"},[e("span",null,"\u8FDC\u7A0B\u534F\u52A9")]),e("div",{class:"banner-inner-b"},[e("span",null,"\u591A\u4EBAAR\u7B2C\u4E00\u89C6\u89D2\u534F\u52A9")])],-1)),me={class:"banner-bot"},pe=["src"],ge=g({__name:"banner",setup(i){return(c,a)=>(f(),v("div",de,[_e,e("div",me,[e("img",{src:h(ce),alt:""},null,8,pe)])]))}});const fe=b(ge,[["__scopeId","data-v-2840fe52"]]),ve={class:"login-form-wrapper"},he={class:"login-form-title"},be={class:"login-form-forget-password"},we={class:"login-form-protocol-actions"},ye=g({__name:"login-form",setup(i){const{t:c}=X.exports.useI18n(),a=re(),w=le(),E=I(""),{loading:y,setLoading:$}=te(),S=J(),k=ie("login-config",{companyNo:"EU0001",username:"",password:"",agreeProtocol:!0}),r=I({...k.value}),C=async({errors:o,values:t})=>{if(!y.value&&!o){if(!t.agreeProtocol){P.warning(c("login.form.agreeProtocol.text1"));return}$(!0);try{t.companyNo="EU0001";const n=await S.login(t);if(n.code!==200&&n.code!==401){P.error(n.msg);return}k.value={...t},K(),Q(n.data.tokenType),Y(n.data.token),Z(n.data.refreshToken);const u=w.query.meetingToken,d=w.query.meetingNo;d||u?(await a.push("/Meeting-list"),await j(),setTimeout(()=>{const p=d?{meetingNo:d}:{meetingToken:u};console.log("\u767B\u5F55\u6210\u529F\u540E\u53D1\u9001 invitation-join-meeting \u4E8B\u4EF6\uFF0C\u6570\u636E:",p),ee.emit("invitation-join-meeting",p)},1500)):a.push({name:"MessageList"})}catch(n){E.value=n.message}finally{$(!1)}}},T=o=>{r.value.agreeProtocol=o},B=()=>{a.push({path:"/ForgetPassword"})},V=()=>{const o=a.resolve({path:"/Protocol"}).href;window.open(o,"_blank")};return(o,t)=>{const n=z,u=D,d=U,p=R,F=q,x=G,N=W;return f(),v("div",ve,[e("div",he,m(o.$t("login.form.title")),1),s(N,{ref:"loginForm",model:r.value,class:"login-form",layout:"vertical",onSubmit:C},{default:l(()=>[s(u,{field:"username",rules:[{required:!0,message:o.$t("login.form.userName.errMsg")}],"validate-trigger":["change","blur"],"hide-label":""},{default:l(()=>[s(n,{modelValue:r.value.username,"onUpdate:modelValue":t[0]||(t[0]=_=>r.value.username=_),size:"large",placeholder:o.$t("login.form.userName.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["rules"]),s(u,{field:"password",rules:[{required:!0,message:o.$t("login.form.password.errMsg")}],"validate-trigger":["change","blur"],"hide-label":""},{default:l(()=>[s(d,{modelValue:r.value.password,"onUpdate:modelValue":t[1]||(t[1]=_=>r.value.password=_),size:"large",placeholder:o.$t("login.form.password.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["rules"]),e("div",be,[e("span",{class:"text-no-select",onClick:B},m(o.$t("login.form.forget.password")),1)]),s(F,{size:48,direction:"vertical",class:"btn-main"},{default:l(()=>[s(p,{type:"primary",size:"large","html-type":"submit",long:"",loading:h(y)},{default:l(()=>[L(m(o.$t("login.form.login")),1)]),_:1},8,["loading"])]),_:1}),s(F,{size:48},{default:l(()=>[e("div",we,[s(x,{modelValue:r.value.agreeProtocol,"onUpdate:modelValue":t[2]||(t[2]=_=>r.value.agreeProtocol=_),checked:"agreeProtocol",onChange:T},{default:l(()=>[e("span",null,m(o.$t("login.form.agreeProtocol")),1)]),_:1},8,["modelValue"]),e("span",{class:"protocolBlue",onClick:V},m(o.$t("login.form.agreeProtocol.text")),1)])]),_:1})]),_:1},8,["model"])])}}});const $e=b(ye,[["__scopeId","data-v-f19050f7"]]),ke={class:"content"},Fe={class:"content-left"},Ie={class:"content-right"},Pe={class:"footer"},Ee=g({__name:"index",setup(i){return oe(),H(()=>{var c,a;se()&&((a=(c=window==null?void 0:window.$wujie)==null?void 0:c.bus)==null||a.$emit("REPEAT_LOGIN",{name:"login"}))}),(c,a)=>(f(),v("div",{class:"container wsl-scroll",style:O({backgroundImage:`url(${h(ae)})`})},[e("div",ke,[e("div",Fe,[s(fe)]),e("div",Ie,[s($e)])]),e("div",Pe,[s(ne)])],4))}});const Ne=b(Ee,[["__scopeId","data-v-85155981"]]);export{Ne as default};
