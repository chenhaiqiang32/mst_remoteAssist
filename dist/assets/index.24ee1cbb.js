import{v as X,ac as W,u as Y,_ as ee,e as fe,S as Ie,C as q,M as ye,ab as Ce,ad as $e,d as ke,ai as ie,E as Me}from"./index.9835b368.js";import{C as o,D as S,E as e,d as te,j as M,w as ue,o as we,b as Se,aE as b,aH as d,F as A,aN as m,aI as u,u as g,aK as F,aJ as z,b4 as re,aW as V,aX as ne,bH as oe,bI as me,bJ as Oe,bK as xe,bL as ae,c as Te,aM as j,b8 as le,bM as _e,bN as he,aF as U,be as Le}from"./arco.638965b6.js";import{p as D,O as J,q as Pe}from"./icon_volume_1.148c46df.js";import{s as Ne}from"./schedule.7df98c70.js";import{S as Q,a as K,o as Ae,I as Ee}from"./invite.bde629dd.js";import{o as He}from"./index.8acb0990.js";/* empty css               */import{c as Ve}from"./icon_close.f7fee805.js";import{f as Ze}from"./vue.125da600.js";import"./chart.ffc0c533.js";/* empty css               */const Re={width:"24",height:"24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ue=e("g",{fill:"#28C445"},[e("path",{d:"M17.62 10.75a.77.77 0 0 1-.77-.77c0-.37-.37-1.14-.99-1.81-.61-.65-1.28-1.03-1.84-1.03a.77.77 0 0 1-.77-.77c0-.42.35-.77.77-.77 1 0 2.05.54 2.97 1.51.86.91 1.41 2.04 1.41 2.86 0 .43-.35.78-.78.78ZM21.232 10.75a.77.77 0 0 1-.77-.77c0-3.55-2.89-6.43-6.43-6.43a.77.77 0 0 1-.77-.77c0-.42.34-.78.76-.78 4.4 0 7.98 3.58 7.98 7.98 0 .42-.35.77-.77.77ZM11.05 14.95 9.2 16.8c-.39.39-1.01.39-1.41.01-.11-.11-.22-.21-.33-.32a28.414 28.414 0 0 1-2.79-3.27c-.82-1.14-1.48-2.28-1.96-3.41C2.24 8.67 2 7.58 2 6.54c0-.68.12-1.33.36-1.93.24-.61.62-1.17 1.15-1.67C4.15 2.31 4.85 2 5.59 2c.28 0 .56.06.81.18.26.12.49.3.67.56l2.32 3.27c.18.25.31.48.4.7.09.21.14.42.14.61 0 .24-.07.48-.21.71-.13.23-.32.47-.56.71l-.76.79c-.11.11-.16.24-.16.4 0 .08.01.15.03.23.03.08.06.14.08.2.18.33.49.76.93 1.28.45.52.93 1.05 1.45 1.58.1.1.21.2.31.3.4.39.41 1.03.01 1.43ZM21.972 18.33c0 .28-.05.57-.15.85-.03.08-.06.16-.1.24-.17.36-.39.7-.68 1.02-.49.54-1.03.93-1.64 1.18-.01 0-.02.01-.03.01-.59.24-1.23.37-1.92.37-1.02 0-2.11-.24-3.26-.73s-2.3-1.15-3.44-1.98c-.39-.29-.78-.58-1.15-.89l3.27-3.27c.28.21.53.37.74.48.05.02.11.05.18.08.08.03.16.04.25.04.17 0 .3-.06.41-.17l.76-.75c.25-.25.49-.44.72-.56.23-.14.46-.21.71-.21.19 0 .39.04.61.13.22.09.45.22.7.39l3.31 2.35c.26.18.44.39.55.64.1.25.16.5.16.78Z"})],-1),Ge=[Ue];function Be(Z,O){return o(),S("svg",Re,[...Ge])}const de={render:Be},De={class:"member-container"},je={class:"member-top"},Fe={class:"member-top-btn"},ze={class:"member-tabs"},qe={class:"member-top-btn-r"},Je={class:"member-search"},Qe={class:"member-content wsl-scroll"},Ke=["onClick"],Xe={class:"member-content-item-left"},We={class:"member-content-item-right"},Ye={class:"member-content-item-right-left"},et=["src"],tt={class:"member-content-item-right-right"},st={class:"member-content-item-right-right-top"},nt={class:"member-content-item-right-right-bot"},ot=["onClick"],at={class:"header-main"},lt={class:"header-main-left"},ct=["src"],it={class:"header-main-title"},rt=["onClick"],dt={class:"member-content-item-left"},ut={class:"member-content-item-right"},mt={class:"member-content-item-right-left"},_t=["src"],ht={class:"member-content-item-right-right"},pt={class:"member-content-item-right-right-top"},vt={class:"member-content-item-right-right-bot"},gt=["onClick"],bt=te({__name:"member",emits:["handleOptionCallOpen","handleChangePage"],setup(Z,{emit:O}){const t=O,{t:x}=X.exports.useI18n(),i=W(),T=Y(),y=M(1),p=M([]),_=M([]),f=M(i.selectPsn),v=M({condition:""}),w=async()=>{p.value=i.memberList},G=async()=>{_.value=i.memberGroupList},R=()=>{if(!v.value.condition)return i.memberList;const s=v.value.condition.toLowerCase();return i.memberList.filter(a=>a.name.toLowerCase().includes(s))},B=()=>{if(!v.value.condition)return i.memberGroupList;const s=v.value.condition.toLowerCase();return i.memberGroupList.map(a=>({...a,contacts:a.contacts.filter(c=>c.name.toLowerCase().includes(s))})).filter(a=>a.contacts.length>0)},N=async()=>{y.value===1?p.value=R():y.value===2&&(_.value=B())},E=s=>{y.value=s,v.value.condition="",y.value===2?G():w()},h=s=>f.value.some(a=>a.userId===s),$=(s,a)=>{if(s.userId===T.userId&&!a){V.info(x("meeting.call.me"));return}const c=f.value.findIndex(k=>k.userId===s.userId);c===-1?f.value.length<i.limitMember?f.value.push(s):V.error(`${x("meeting.member.limit.member.tip")} ${i.limitMember}`):f.value.splice(c,1),i.updateAddressSelectPsn(f.value)},n=M("right"),C=s=>{t("handleOptionCallOpen",[s])},l=()=>{f.value=[],i.updateAddressSelectPsn([])},r=()=>{t("handleChangePage",1)};ue(()=>[i.selectPsn,i.memberList],s=>{s[0]&&(f.value=i.selectPsn),s[1]&&E(y.value)});const L=()=>{setTimeout(()=>{const s=i.memberList.find(a=>a.userId===T.userId);$(s,!0)},500)};return we(()=>{w(),L()}),Se(()=>{l()}),(s,a)=>{const c=ne,k=oe,H=me,ce=Oe,pe=xe,ve=ae;return o(),b(ve,{class:"general-card member-panel",bordered:!1,"body-style":{height:"100%",display:"flex",padding:0,flexFlow:"column"}},{default:d(()=>[e("div",De,[e("div",je,[e("div",Fe,[e("div",ze,[e("div",{class:A(["member-tab",y.value===1?"active":""]),onClick:a[0]||(a[0]=I=>E(1))},[e("span",null,m(s.$t("meeting.member.tabs.all")),1)],2),e("div",{class:A(["member-tab",y.value===2?"active":""]),onClick:a[1]||(a[1]=I=>E(2))},[e("span",null,m(s.$t("meeting.member.tabs.group")),1)],2)]),e("div",qe,[u(c,{onClick:r},{default:d(()=>[e("span",null,m(g(x)("meeting.member.left.btn.concat.qr")),1)]),_:1})])]),u(k,{margin:0}),e("div",Je,[u(H,{modelValue:v.value.condition,"onUpdate:modelValue":a[2]||(a[2]=I=>v.value.condition=I),size:"large",style:{width:"100%"},placeholder:s.$t("meeting.member.tabs.search"),onInput:N},null,8,["modelValue","placeholder"])])]),e("div",Qe,[y.value===1?(o(!0),S(F,{key:0},z(p.value,(I,se)=>(o(),S("div",{key:`member_${se}`,class:A(["member-content-item",h(I.userId)?"selected":""]),onClick:P=>$(I)},[e("div",Xe,[h(I.userId)?(o(),b(g(Q),{key:0})):(o(),b(g(K),{key:1}))]),e("div",We,[e("div",Ye,[e("img",{src:I.avatarUrl,alt:""},null,8,et),e("div",{class:A(["member-online",I.pcOnline||I.glassOnline||I.androidOnline?"online":"outline"])},null,2)]),e("div",tt,[e("div",st,[e("span",null,m(I.name),1)]),e("div",nt,[e("span",null,m(I.alias),1)])])]),e("div",{class:A({"member-content-item-btn":!0,"member-content-item-btn-my":I.userId===g(T).userId}),onClick:re(P=>C(I),["stop"])},[u(g(de))],10,ot)],10,Ke))),128)):(o(),b(pe,{key:1,bordered:!1,"expand-icon-position":n.value},{default:d(()=>[(o(!0),S(F,null,z(_.value,(I,se)=>(o(),b(ce,{key:`group_${se}`},{header:d(()=>[e("div",at,[e("div",lt,[e("img",{src:g(Ae),alt:""},null,8,ct)]),e("div",it,[e("span",null,m(I.groupName)+" ("+m(I.contacts.length)+")",1)])])]),default:d(()=>[(o(!0),S(F,null,z(I.contacts,(P,ge)=>(o(),S("div",{key:`member_${ge}`,class:A(["member-content-item",h(P.userId)?"selected":""]),onClick:be=>$(P)},[e("div",dt,[h(P.userId)?(o(),b(g(Q),{key:0,size:"12"})):(o(),b(g(K),{key:1,size:"12"}))]),e("div",ut,[e("div",mt,[e("img",{src:P.avatarUrl,alt:""},null,8,_t),e("div",{class:A(["member-online",P.pcOnline||P.glassOnline||P.androidOnline?"online":"outline"])},null,2)]),e("div",ht,[e("div",pt,[e("span",null,m(P.name),1)]),e("div",vt,[e("span",null,m(P.alias),1)])])]),e("div",{class:A({"member-content-item-btn":!0,"member-content-item-btn-my":P.userId===g(T).userId}),onClick:re(be=>C(P),["stop"])},[u(g(de))],10,gt)],10,rt))),128))]),_:2},1024))),128))]),_:1},8,["expand-icon-position"]))])])]),_:1})}}});const ft=ee(bt,[["__scopeId","data-v-1f32146b"]]),It={width:"16",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},yt=e("g",{stroke:"#fff","stroke-width":"1.2"},[e("path",{d:"M14.645 12.22c0 .24-.053.486-.166.726a2.75 2.75 0 0 1-.454.68c-.326.36-.686.62-1.093.787-.4.167-.833.253-1.3.253-.68 0-1.407-.16-2.173-.486a11.713 11.713 0 0 1-2.294-1.32 19.164 19.164 0 0 1-2.186-1.867 18.939 18.939 0 0 1-1.86-2.18c-.547-.76-.987-1.52-1.307-2.273-.32-.76-.48-1.487-.48-2.18 0-.454.08-.887.24-1.287.16-.407.413-.78.767-1.113.426-.42.893-.627 1.386-.627.187 0 .374.04.54.12.174.08.327.2.447.373l1.547 2.18c.12.167.206.32.266.467.06.14.094.28.094.407 0 .16-.047.32-.14.473a2.268 2.268 0 0 1-.374.473l-.506.527a.357.357 0 0 0-.107.267c0 .053.007.1.02.153.02.053.04.093.053.133.12.22.327.507.62.854.3.346.62.7.967 1.053.36.353.707.68 1.06.98.347.293.633.493.86.613.033.014.073.034.12.054a.46.46 0 0 0 .167.026c.113 0 .2-.04.273-.113l.507-.5c.166-.167.326-.293.48-.373a.888.888 0 0 1 .473-.14c.127 0 .26.026.407.086.146.06.3.147.466.26l2.207 1.567c.173.12.293.26.367.427.066.166.106.333.106.52Z","stroke-miterlimit":"10"}),e("path",{d:"M12.333 6c0-.4-.313-1.014-.78-1.514-.426-.46-.993-.82-1.553-.82M14.667 6A4.663 4.663 0 0 0 10 1.333","stroke-linecap":"round","stroke-linejoin":"round"})],-1),Ct=[yt];function $t(Z,O){return o(),S("svg",It,[...Ct])}const kt={render:$t},Mt={width:"16",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},wt=e("g",{"fill-rule":"evenodd","clip-rule":"evenodd",fill:"#fff"},[e("path",{d:"M5.332.833a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2a.5.5 0 0 1 .5-.5ZM10.668.833a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2a.5.5 0 0 1 .5-.5ZM1.832 6.06a.5.5 0 0 1 .5-.5h11.333a.5.5 0 0 1 0 1H2.332a.5.5 0 0 1-.5-.5Z"}),e("path",{d:"M3.158 3.59c-.427.46-.658 1.153-.658 2.076v5.667c0 .923.23 1.616.658 2.076.421.454 1.104.757 2.175.757h5.334c1.071 0 1.754-.303 2.175-.757.427-.46.658-1.153.658-2.076V5.666c0-.923-.23-1.616-.658-2.076-.421-.453-1.104-.757-2.175-.757H5.333c-1.071 0-1.754.304-2.175.757Zm-.733-.68c.663-.714 1.646-1.077 2.908-1.077h5.334c1.262 0 2.245.363 2.908 1.076.656.707.925 1.68.925 2.757v5.667c0 1.077-.27 2.05-.925 2.757-.663.713-1.646 1.076-2.908 1.076H5.333c-1.262 0-2.245-.363-2.908-1.076-.656-.707-.925-1.68-.925-2.757V5.666c0-1.076.27-2.05.925-2.757Z"}),e("path",{d:"M9.797 9.133c0-.368.298-.666.666-.666h.007a.667.667 0 1 1 0 1.333h-.007a.667.667 0 0 1-.666-.667ZM9.797 11.133c0-.368.298-.666.666-.666h.007a.667.667 0 0 1 0 1.333h-.007a.667.667 0 0 1-.666-.667ZM7.332 9.133c0-.368.299-.666.667-.666h.006a.667.667 0 1 1 0 1.333h-.006a.667.667 0 0 1-.667-.667ZM7.332 11.133c0-.368.299-.666.667-.666h.006a.667.667 0 0 1 0 1.333h-.006a.667.667 0 0 1-.667-.667ZM4.863 9.133c0-.368.299-.666.667-.666h.006a.667.667 0 1 1 0 1.333H5.53a.667.667 0 0 1-.667-.667ZM4.863 11.133c0-.368.299-.666.667-.666h.006a.667.667 0 0 1 0 1.333H5.53a.667.667 0 0 1-.667-.667Z"})],-1),St=[wt];function Ot(Z,O){return o(),S("svg",Mt,[...St])}const xt={render:Ot},Tt={width:"16",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Lt=e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.525 4.5a3.551 3.551 0 0 0-.457.025c-.806.069-1.34.333-1.68.734-.347.407-.556 1.028-.556 1.934V9.86c0 1.29.263 1.9.628 2.22.382.334 1.01.473 2.065.473h.267c.175 0 .338.056.461.118.124.063.261.159.363.292l.003.004.8 1.067c.098.13.19.154.24.154.05 0 .142-.023.239-.154l.8-1.067c.195-.26.503-.414.827-.414h.267c.907 0 1.528-.207 1.935-.553.4-.34.665-.873.733-1.682a3.555 3.555 0 0 0 .025-.458V7.193c0-.986-.246-1.634-.652-2.04-.406-.406-1.055-.653-2.041-.653H4.525Zm-.552-.97c.185-.023.37-.03.552-.03h4.267c1.14 0 2.089.286 2.748.946.659.659.945 1.607.945 2.747V9.86c0 .182-.006.367-.029.552-.086.986-.428 1.796-1.082 2.35-.65.552-1.535.791-2.582.791h-.267c-.003 0-.008.001-.014.004a.034.034 0 0 0-.012.01l-.8 1.065c-.256.343-.627.556-1.04.556-.413 0-.785-.213-1.04-.555l-.79-1.053a.183.183 0 0 0-.052-.027h-.252c-1.071 0-2.04-.124-2.723-.72-.7-.61-.97-1.597-.97-2.973V7.193c0-1.047.241-1.932.793-2.582.556-.654 1.365-.996 2.348-1.082Z",fill:"#fff"},null,-1),Pt=e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.617 3.5h4.177c1.14 0 2.089.286 2.748.945.659.66.945 1.607.945 2.748v2.578c.5-.123.86-.344 1.112-.641.346-.406.555-1.027.555-1.937V4.526c0-.986-.247-1.634-.653-2.04-.406-.406-1.054-.653-2.04-.653H7.194c-.906 0-1.527.209-1.934.555-.298.253-.52.613-.643 1.112Zm-.005-1.874c.65-.552 1.535-.793 2.582-.793h4.267c1.14 0 2.088.286 2.747.946.66.659.946 1.607.946 2.747v2.667c0 1.05-.24 1.936-.793 2.585-.559.655-1.371.995-2.358 1.08a.5.5 0 0 1-.539-.56c.017-.133.023-.277.023-.438V7.193c0-.986-.246-1.635-.652-2.04-.406-.406-1.055-.653-2.041-.653H4.527c-.161 0-.306.006-.438.022a.5.5 0 0 1-.56-.538c.085-.988.427-1.8 1.083-2.358Z",fill:"#fff"},null,-1),Nt=e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.332 8.834c0-.369.299-.667.667-.667h.006a.667.667 0 0 1 0 1.333h-.006a.667.667 0 0 1-.667-.666ZM5.996 8.834c0-.369.299-.667.667-.667h.006a.667.667 0 0 1 0 1.333h-.006a.667.667 0 0 1-.667-.666ZM3.664 8.834c0-.369.299-.667.667-.667h.006a.667.667 0 0 1 0 1.333H4.33a.667.667 0 0 1-.667-.666Z",fill:"#fff"},null,-1),At=[Lt,Pt,Nt];function Et(Z,O){return o(),S("svg",Tt,[...At])}const Ht={render:Et},Vt={class:"select-container"},Zt={class:"select-top"},Rt={class:"select-top-right"},Ut={class:"select-main wsl-scroll"},Gt={class:"block-item-grid"},Bt={class:"block-item-grid-left"},Dt={class:"block-item-grid-left-icon"},jt=["src"],Ft={class:"block-item-grid-right"},zt={class:"block-item-grid-right-top"},qt={class:"block-item-grid-right-bot"},Jt=["onClick"],Qt=["src"],Kt="ChatDB",Xt=te({__name:"select",emits:["handleScheduleOpen","handleOptionCallOpen"],setup(Z,{emit:O}){const{addConversation:t,getAllConversations:x}=fe(Kt),i=Y(),T=O,{t:y}=X.exports.useI18n(),p=Ze(),_=W(),f=Ie(),v=M(_.selectPsn);ue(()=>_.selectPsn,n=>{v.value=n},{immediate:!0,deep:!0});const w=Te(()=>v.value.length===1&&v.value.some(n=>n.userId===i.userId)?!0:!(v.value.length>0)),G=()=>{T("handleOptionCallOpen",_.selectPsn.filter(n=>n.userId!==i.userId))},R=async n=>{const C={conversationId:`${q.PRIVATE_CHAT}_${n.userId}`,targetId:n.userId,targetName:n.name,targetAvatarUrl:n.avatarUrl,unreadCount:0,sendTime:Date.now(),name:n.name,messageType:ye.TEXT,content:"",chatType:q.PRIVATE_CHAT,status:1};await t(C);const l=await x();f.updateConversationList(l),f.updateCurConversation(J(C))},B=async()=>{const n=v.value.filter(C=>C.userId!==i.userId);if(n.length>1){let l=D(n,"name").join("\u3001");l=l.length>50?`${l.substring(0,46)}...`:l;const r=await f.createGroup({groupName:l,userIds:D(n,"userId")});if(r.code!==200&&r.code!==401){V.error(r.msg);return}V.success(y("meeting.member.create.group.success")),f.updateCurConversation({targetId:r.data.groupId,targetName:r.data.groupName,chatType:q.GROUP_CHAT,conversationId:`${q.GROUP_CHAT}_${r.data.groupId}`,targetAvatarUrl:r.data.avatarUrl}),p.push({name:"MessageList"})}else await R(J(n[0])),p.push({name:"MessageList"})},N=M(_.limitMember),E=(n,C)=>{if(C.userId===i.userId){V.info(y("meeting.call.me"));return}_.selectPsn.splice(n,1)},h=()=>{const n=_.selectPsn.filter(C=>C.userId===i.userId);_.clearAddressSelectPsn(n)},$=()=>{T("handleScheduleOpen")};return(n,C)=>{const l=ne,r=le,L=oe,s=ae,a=_e,c=he;return o(),b(s,{class:"general-card select-panel",bordered:!1,"body-style":{height:"100%",display:"flex",padding:0,flexFlow:"column"}},{default:d(()=>[e("div",Vt,[e("div",Zt,[e("div",{class:A(["select-top-left",v.value.length>0?"":"disabled"])},[e("span",null,m(n.$t("meeting.member.right.title"))+" ("+m(v.value.length)+"/"+m(N.value)+") "+m(n.$t("meeting.member.right.title.dw")),1)],2),e("div",Rt,[u(r,null,{default:d(()=>[u(l,{type:"primary",class:"btn-item",disabled:w.value,onClick:G},{icon:d(()=>[u(g(kt))]),default:d(()=>[j(" "+m(n.$t("meeting.member.right.btn.call")),1)]),_:1},8,["disabled"]),u(l,{type:"primary",class:"btn-item",disabled:w.value,onClick:$},{icon:d(()=>[u(g(xt))]),default:d(()=>[j(m(n.$t("meeting.member.right.btn.yyhy")),1)]),_:1},8,["disabled"]),u(l,{type:"primary",class:"btn-item",disabled:w.value,onClick:B},{icon:d(()=>[u(g(Ht))]),default:d(()=>[j(m(v.value.length>1?n.$t("meeting.member.right.btn.fqql"):n.$t("meeting.member.right.btn.fqlt")),1)]),_:1},8,["disabled"]),u(l,{type:"outline",class:"btn-item",status:"danger",disabled:w.value,onClick:h},{default:d(()=>[j(m(n.$t("meeting.member.right.btn.clear")),1)]),_:1},8,["disabled"])]),_:1})])]),u(L,{margin:0}),e("div",Ut,[u(c,{gutter:[16,16],style:{marginTop:"10px"}},{default:d(()=>[(o(!0),S(F,null,z(v.value,(k,H)=>(o(),b(a,{key:`psn_${H}`,xs:12,sm:12,md:12,lg:12,xl:12,xxl:8},{default:d(()=>[u(s,{class:"grid-card",hoverable:""},{default:d(()=>[e("div",Gt,[e("div",Bt,[e("div",Dt,[e("img",{src:k.avatarUrl,alt:""},null,8,jt),e("div",{class:A(["block-item-grid-left-icon-status",k.pcOnline||k.glassOnline||k.androidOnline?"online":"outline"])},null,2)])]),e("div",Ft,[e("div",zt,[e("span",null,m(k.name),1)]),e("div",qt,[e("span",null,m(k.alias),1)])])]),e("div",{class:"grid-card-fixed",onClick:ce=>E(H,k)},[e("img",{src:g(Ve),alt:""},null,8,Qt)],8,Jt)]),_:2},1024)]),_:2},1024))),128))]),_:1})])])]),_:1})}}});const Wt=ee(Xt,[["__scopeId","data-v-abae22c7"]]),Yt={width:"20",height:"20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},es=e("path",{d:"M6 10c0-.195.08-.381.221-.517l6.525-6.276a.748.748 0 0 1 1.043.01.715.715 0 0 1-.01 1.024L7.792 10l5.987 5.759c.29.28.295.738.01 1.024a.748.748 0 0 1-1.043.01L6.22 10.517A.718.718 0 0 1 6 10Z",fill:"#272636"},null,-1),ts=[es];function ss(Z,O){return o(),S("svg",Yt,[...ts])}const ns={render:ss},os={class:"concat-container"},as={class:"concat-top"},ls={class:"concat-top-right"},cs={class:"concat-desc"},is={class:"concat-desc-r"},rs={class:"concat-main wsl-scroll"},ds={class:"block-item-grid"},us={class:"block-item-grid-left"},ms={class:"block-item-grid-left-icon"},_s=["src"],hs={class:"block-item-grid-right"},ps={class:"block-item-grid-right-top"},vs={class:"block-item-grid-right-bot"},gs={class:"grid-card-fixed"},bs=te({__name:"concat",emits:["handleChangePage"],setup(Z,{emit:O}){const t=O,{t:x}=X.exports.useI18n(),i=W(),T=Y(),y=M(i.memberList),p=M([]),_=M({condition:""}),f=M(!1),v=h=>p.value.some($=>$.userId===h),w=h=>{const $=p.value.findIndex(n=>n.userId===h.userId);$===-1?p.value.push(h):p.value.splice($,1)},G=()=>{if(!_.value.condition)return i.memberList;const h=_.value.condition.toLowerCase();return i.memberList.filter($=>$.name.toLowerCase().includes(h))},R=async()=>{y.value=G()},B=()=>{f.value?(f.value=!1,p.value=[]):(f.value=!0,p.value=J(y.value))},N=async()=>{try{const h=await T.batchExport({ids:D(p.value,"userId")});Pe(h,`${x("meeting.member.left.btn.concat.export.name")}.zip`,"application/zip")}catch{V.error(x("meeting.member.left.btn.concat.export.msg1"))}},E=()=>{t("handleChangePage",0)};return(h,$)=>{const n=me,C=ne,l=le,r=oe,L=ae,s=_e,a=he;return o(),b(L,{class:"general-card concat-panel",bordered:!1,"body-style":{width:"100%",height:"100%",display:"flex",padding:0,flexFlow:"column"}},{default:d(()=>[e("div",os,[e("div",as,[e("div",{class:"concat-top-left",onClick:E},[u(g(ns)),e("span",null,m(h.$t("meeting.member.left.btn.concat.qr")),1)]),e("div",ls,[u(l,null,{default:d(()=>[u(n,{modelValue:_.value.condition,"onUpdate:modelValue":$[0]||($[0]=c=>_.value.condition=c),style:{width:"100%"},placeholder:h.$t("meeting.member.tabs.search"),onInput:R},null,8,["modelValue","placeholder"]),u(C,{type:"primary",class:"btn-item",disabled:!(p.value.length>0),onClick:N},{default:d(()=>[j(m(h.$t("meeting.member.left.btn.concat.export")),1)]),_:1},8,["disabled"])]),_:1})])]),u(r,{margin:0}),e("div",cs,[e("div",{class:"concat-desc-l",onClick:B},[f.value?(o(),b(g(Q),{key:0})):(o(),b(g(K),{key:1}))]),e("div",is,[e("span",null,m(g(x)("meeting.member.left.btn.concat.all")),1)])]),e("div",rs,[u(a,{gutter:[16,16],style:{marginTop:"10px"}},{default:d(()=>[(o(!0),S(F,null,z(y.value,(c,k)=>(o(),b(s,{key:`psn_${k}`,xs:24,sm:12,md:8,lg:8,xl:6,xxl:6,onClick:H=>w(c)},{default:d(()=>[u(L,{class:"grid-card",hoverable:""},{default:d(()=>[e("div",ds,[e("div",us,[e("div",ms,[e("img",{src:c.avatarUrl,alt:""},null,8,_s),e("div",{class:A(["block-item-grid-left-icon-status",c.pcOnline||c.glassOnline||c.androidOnline?"online":"outline"])},null,2)])]),e("div",hs,[e("div",ps,[e("span",null,m(c.name),1)]),e("div",vs,[e("span",null,m(c.alias),1)])])]),e("div",gs,[v(c.userId)?(o(),b(g(Q),{key:0})):(o(),b(g(K),{key:1}))])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})])])]),_:1})}}});const fs=ee(bs,[["__scopeId","data-v-14a70690"]]),Is={class:"container"},ys={key:0,class:"layout"},Cs={class:"layout-left-side"},$s={class:"layout-content"},ks={key:1,class:"layout-concat"},Ms=te({__name:"index",setup(Z){const O=W(),t=Ce(),x=$e(),i=Y(),T=ke(),{t:y}=X.exports.useI18n(),p=M(!1),_=M(0),f=()=>{const l=O.selectPsn.filter(r=>r.userId!==i.userId);t.updateSchedulePsn(J(l)),p.value=!0},v=()=>{t.updateSchedulePsn([]),p.value=!1},w=M(!1),G=()=>{w.value=!0},R=()=>{w.value=!1},B=l=>{R(),t.updateSchedulePsn(l)},N=M(!1),E=()=>{t.updateRoomOptions(null),t.updateRoomInvitePsn(null),N.value=!1},h=l=>{if(t.answerInfo&&t.answerInfo.meetingNo){V.error(y("meeting.call.message.tips"));return}N.value=!0,t.updateRoomInvitePsn(l),t.updateRoomOptions({meetingName:`${i.name} ${y("meeting.room.option.meetingName")}`,video:!1,audio:!0,loudspeaker:!0,cloudRecord:!1,abstract:!1,escaping:!1,organizer:i.name})},$=async l=>{var r,L,s,a;try{console.log("Address-handleJoinAssist",t,t.ThImEvent,l);const c=await t.ThImEvent.joinMeeting({meetingNo:l.meetingNo,forceEntryStatus:0,inviters:D(t.roomInvitePsn,"userId")});if(x.updateRoomTranslateInfo({...x.roomTranslateInfo,...c.data,open:!!((r=c.data)!=null&&r.enableTranslation)}),T.updateBtnLoading(!1),c.code!==200&&c.code!==401){c.code===ie.OTHER_CLIENT_JOINED_MEETING||c.code===ie.OTHER_CLIENT_IN_MEETING?(t.updateForceEntryMeetingInfo({meetingNo:l.meetingNo,invitor:D(t.roomInvitePsn,"userId")}),Me.emit("Chat-Other-Client-Joined-Meeting")):V.error(c.msg);return}t.ThImEvent.roomMenuOptions={video:(L=t.roomOptions)==null?void 0:L.video,audio:(s=t.roomOptions)==null?void 0:s.audio,loudspeaker:(a=t.roomOptions)==null?void 0:a.loudspeaker},t.ThImEvent.setRoomOnlineListPsn(O.memberList),t.ThImEvent.setRoomOnlineGroupPsn(O.memberGroupList),console.log("address--join-----",t.roomInvitePsn),t.ThImEvent.updateInvitingList(t.roomInvitePsn,"add"),E(),t.updateAssistVisible(!0)}catch{T.updateBtnLoading(!1)}},n=async()=>{var l,r,L,s,a,c,k;try{const H=await t.createRealtimeMeeting({aiStatus:(l=t.roomOptions)!=null&&l.abstract?"1":"0",recordStatus:(r=t.roomOptions)!=null&&r.cloudRecord?"1":"0",escaping:(L=t.roomOptions)!=null&&L.escaping?"1":"0",subject:(s=t.roomOptions)==null?void 0:s.meetingName,userIds:D(t.roomInvitePsn,"userId"),enableTranslation:(a=t.roomOptions)!=null&&a.escaping?"1":"0",languageType:(c=x.roomTranslateInfo)==null?void 0:c.languageType,industryType:(k=x.roomTranslateInfo)==null?void 0:k.industryType});if(H.code!==200&&H.code!==401){V.error(H.msg),T.updateBtnLoading(!1);return}$(H.data)}catch{T.updateBtnLoading(!1)}},C=l=>{_.value=l};return(l,r)=>{const L=le,s=Le;return o(),S("div",Is,[_.value===0?(o(),S("div",ys,[e("div",Cs,[_.value===0?(o(),b(ft,{key:0,onHandleOptionCallOpen:h,onHandleChangePage:C})):U("",!0)]),e("div",$s,[u(L,{size:16,direction:"vertical",fill:""},{default:d(()=>[_.value===0?(o(),b(Wt,{key:0,onHandleScheduleOpen:f,onHandleOptionCallOpen:h})):U("",!0)]),_:1})])])):U("",!0),_.value===1?(o(),S("div",ks,[_.value===1?(o(),b(fs,{key:0,onHandleChangePage:C})):U("",!0)])):U("",!0),p.value?(o(),b(s,{key:2,visible:p.value,"onUpdate:visible":r[0]||(r[0]=a=>p.value=a),footer:!1,closable:!1,class:"customModal"},{default:d(()=>[u(Ne,{onHandleClose:v,onHandleInviteOpen:G})]),_:1},8,["visible"])):U("",!0),w.value?(o(),b(s,{key:3,visible:w.value,"onUpdate:visible":r[1]||(r[1]=a=>w.value=a),footer:!1,closable:!1,class:"customModal"},{default:d(()=>[u(Ee,{"select-psn":g(t).schedulePsn,onHandleClose:R,onHandleInvite:B},null,8,["select-psn"])]),_:1},8,["visible"])):U("",!0),N.value?(o(),b(s,{key:4,visible:N.value,"onUpdate:visible":r[2]||(r[2]=a=>N.value=a),footer:!1,closable:!1,class:"customModal"},{default:d(()=>[u(He,{onHandleCall:n,onHandleClose:E})]),_:1},8,["visible"])):U("",!0)])}}});const Vs=ee(Ms,[["__scopeId","data-v-5ef3be9a"]]);export{Vs as default};
